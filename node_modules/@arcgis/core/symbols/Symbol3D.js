/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../core/has.js";import r from"../core/Logger.js";import{property as o}from"../core/accessorSupport/decorators/property.js";import{cast as t}from"../core/accessorSupport/decorators/cast.js";import{reader as s}from"../core/accessorSupport/decorators/reader.js";import l from"../core/Warning.js";import{subclass as i}from"../core/accessorSupport/decorators/subclass.js";import{writer as a}from"../core/accessorSupport/decorators/writer.js";import{isAbsolute as m,normalize as y,hasSamePortal as n}from"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import{f as p,t as c}from"../chunks/persistableUrlUtils.js";import b from"../core/Collection.js";import u from"./Symbol.js";import f from"./Symbol3DLayer.js";import d from"./ExtrudeSymbol3DLayer.js";import g from"./FillSymbol3DLayer.js";import j from"./IconSymbol3DLayer.js";import{referenceSetter as S,castForReferenceSetter as h}from"../core/collectionUtils.js";import L from"../portal/Portal.js";import O from"./LineSymbol3DLayer.js";import _ from"./ObjectSymbol3DLayer.js";import U from"./PathSymbol3DLayer.js";import D from"./TextSymbol3DLayer.js";import w from"./WaterSymbol3DLayer.js";import x from"./support/StyleOrigin.js";import N from"./support/Thumbnail.js";const v={icon:j,object:_,line:O,path:U,fill:g,extrude:d,text:D,water:w},C=b.ofType({base:f,key:"type",typeMap:v,errorContext:"symbol-layer"}),T=r.getLogger("esri.symbols.Symbol3D");let k=class extends u{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,o=r&&r.type||b;this._set("symbolLayers",new o)}get color(){return null}set color(e){T.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){S(e,this._get("symbolLayers"))}readStyleOrigin(e,r,o){if(e.styleUrl&&e.name){const r=p(e.styleUrl,o);return new x({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new x({portal:o&&o.portal||L.getDefault(),styleName:e.styleName,name:e.name});o&&o.messages&&o.messages.push(new l("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:o,definition:e}))}writeStyleOrigin(e,r,o,t){if(e.styleUrl&&e.name){let o=c(e.styleUrl,t);m(o)&&(o=y(o)),r.styleOrigin={styleUrl:o,name:e.name}}else e.styleName&&e.name&&(e.portal&&t&&t.portal&&!n(e.portal.restUrl,t.portal.restUrl)?t&&t.messages&&t.messages.push(new l("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof f||e&&v[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};e([o({json:{read:!1,write:!1}})],k.prototype,"color",null),e([o({type:C,nonNullable:!0,json:{write:!0}}),t(h)],k.prototype,"symbolLayers",null),e([o({type:x})],k.prototype,"styleOrigin",void 0),e([s("styleOrigin")],k.prototype,"readStyleOrigin",null),e([a("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],k.prototype,"writeStyleOrigin",null),e([o({type:N,json:{read:!1}})],k.prototype,"thumbnail",void 0),e([o({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],k.prototype,"type",void 0),k=e([i("esri.symbols.Symbol3D")],k);var A=k;export default A;
