/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{isSome as t}from"../core/maybe.js";import r from"../request.js";import{normalizeCentralMeridian as o}from"../geometry/support/normalizeUtils.js";import{parseUrl as e,encode as s,asValidOptions as m}from"./utils.js";import i from"../tasks/support/ImageServiceIdentifyResult.js";async function n(n,f,p){const y=e(n),u=f.geometry?[f.geometry]:[];return o(u).then((o=>{const e=f.toJSON(),i=o&&o[0];t(i)&&(e.geometry=JSON.stringify(i.toJSON()));const n=s({...y.query,f:"json",...e}),u=m(n,p);return r(y.path+"/identify",u)})).then((t=>i.fromJSON(t.data)))}export{n as imageServiceIdentify};
