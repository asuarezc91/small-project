/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import t from"../../request.js";import{parseUrl as r,encode as s,asValidOptions as e}from"../utils.js";import{isValidExtent as o,isValidLocation as n}from"./utils.js";import a from"../../tasks/support/AddressCandidate.js";import i from"../../tasks/support/AddressToLocationsParameters.js";async function d(o,n,a){n=i.from(n);const d=r(o),{address:p,...m}=n.toJSON(),u={...p,...m,f:"json"},c=s({...d.query,...u}),j=e(c,a),l=`${d.path}/findAddressCandidates`;return t(l,j).then(f)}function f({data:t}){if(!t)return[];const{candidates:r,spatialReference:s}=t;return r?r.map((t=>{if(!t)return;const{extent:r,location:e}=t,i=!r||o(r);return n(e)&&i?(r&&(r.spatialReference=s),e.spatialReference=s,a.fromJSON(t)):void 0})):[]}export{d as addressToLocations};
