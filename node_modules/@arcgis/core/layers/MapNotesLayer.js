/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../core/has.js";import"../core/Logger.js";import"../core/accessorSupport/ensureType.js";import{property as r}from"../core/accessorSupport/decorators/property.js";import{reader as o}from"../core/accessorSupport/decorators/reader.js";import{subclass as t}from"../core/accessorSupport/decorators/subclass.js";import"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import i from"../geometry/SpatialReference.js";import a from"../geometry/Extent.js";import"../geometry.js";import s from"../core/Collection.js";import p from"./Layer.js";import{MultiOriginJSONMixin as n}from"../core/MultiOriginJSONSupport.js";import{OperationalLayer as l}from"./mixins/OperationalLayer.js";import{BlendLayer as c}from"./mixins/BlendLayer.js";import{PortalLayer as m}from"./mixins/PortalLayer.js";import{ScaleRangeLayer as y}from"./mixins/ScaleRangeLayer.js";import d from"./FeatureLayer.js";import u,{graphicsCollectionProperty as f}from"../support/GraphicsCollection.js";let h=class extends(c(y(l(m(n(p)))))){constructor(e){super(e),this.capabilities={operations:{supportsEditing:!0}},this.legendEnabled=!1,this.lineGraphics=new u,this.opacity=1,this.pointGraphics=new u,this.polygonGraphics=new u,this.textGraphics=new u,this.type="map-notes"}readFullExtent(e,r){if(!r.layers.length)return new a({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:i.WGS84});const o=i.fromJSON(r.layers[0].layerDefinition.spatialReference);return r.layers.reduce(((e,r)=>{const o=r.layerDefinition.extent;return o?a.fromJSON(o).union(e):e}),new a({spatialReference:o}))}readCapabilities(e,r){return{operations:{supportsEditing:!r.layers.some((e=>!!e.layerDefinition.drawingInfo))}}}readFeatureCollections(e,r,o){const t=r.layers.map((e=>{const r=new d;return r.read(e,o),r}));return new s({items:t})}readMinScale(e,r){for(const e of r.layers)if(null!=e.layerDefinition.minScale)return e.layerDefinition.minScale;return 0}readMaxScale(e,r){for(const e of r.layers)if(null!=e.layerDefinition.maxScale)return e.layerDefinition.maxScale;return 0}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}read(e,r){"featureCollection"in e&&super.read(e.featureCollection,r),super.read(e,r)}};e([o(["web-map","portal-item"],"fullExtent",["layers"])],h.prototype,"readFullExtent",null),e([r({readOnly:!0})],h.prototype,"capabilities",void 0),e([o(["portal-item","web-map"],"capabilities",["layers"])],h.prototype,"readCapabilities",null),e([r({readOnly:!0})],h.prototype,"featureCollections",void 0),e([o(["web-map","portal-item"],"featureCollections",["layers"])],h.prototype,"readFeatureCollections",null),e([r({readOnly:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}})],h.prototype,"legendEnabled",void 0),e([r(f("lineGraphics"))],h.prototype,"lineGraphics",void 0),e([r({type:["show","hide"]})],h.prototype,"listMode",void 0),e([o(["web-map","portal-item"],"minScale",["layers"])],h.prototype,"readMinScale",null),e([o(["web-map","portal-item"],"maxScale",["layers"])],h.prototype,"readMaxScale",null),e([r({type:Number,json:{name:"opacity",write:!0}})],h.prototype,"opacity",void 0),e([r(f("pointGraphics"))],h.prototype,"pointGraphics",void 0),e([r(f("polygonGraphics"))],h.prototype,"polygonGraphics",void 0),e([r(f("textGraphics"))],h.prototype,"textGraphics",void 0),e([r({readOnly:!0,json:{read:!1}})],h.prototype,"type",void 0),h=e([t("esri.layers.MapNotesLayer")],h);var j=h;export default j;
