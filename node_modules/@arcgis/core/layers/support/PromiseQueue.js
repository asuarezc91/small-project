/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{create as t,throwIfAborted as s,createAbortError as e}from"../../core/promiseUtils.js";class r{constructor(t,s,e,r){this.resolve=t,this.reject=s,this.callback=e,this.signal=r}}export default class{constructor(){this._tasks=new Array}get length(){return this._tasks.length}push(s,e){return t(((t,n)=>this._tasks.push(new r(t,n,s,e))))}unshift(s,e){return t(((t,n)=>this._tasks.unshift(new r(t,n,s,e))))}process(){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{s(t.signal);const e=t.callback();e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then?e.then(t.resolve,t.reject):t.resolve(e)}catch(s){t.reject(s)}return!0}cancelAll(){const t=e();for(const s of this._tasks)s.reject(t);this._tasks.length=0}}
