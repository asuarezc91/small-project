/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import e from"../PixelBlock.js";const t=180/Math.PI,r=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0},i=new Map;function n(e,t){return i.get(t)/i.get(e)||1}function o(e){return(450-e)%360}function s(e,r="geographic"){const[i,n]=e,s=Math.sqrt(i*i+n*n);let l=Math.atan2(n,i)*t;return l=(360+l)%360,"geographic"===r&&(l=o(l)),[s,l]}function l(e,r="geographic"){let i=e[1];"geographic"===r&&(i=o(i)),i%=360;const n=e[0];return[n*Math.cos(i/t),n*Math.sin(i/t)]}function p(t,i,n="geographic",o=1){if(!r(t))return t;const{pixels:p,width:a,height:c}=t,h=a*c,u=p[0],g=p[1],f=e.createEmptyBand(t.pixelType,h),d=e.createEmptyBand(t.pixelType,h);let x=0;for(let e=0;e<c;e++)for(let e=0;e<a;e++)"vector-uv"===i?([f[x],d[x]]=s([u[x],g[x]],n),f[x]*=o):([f[x],d[x]]=l([u[x],g[x]],n),f[x]*=o,d[x]*=o),x++;const m=new e({pixelType:t.pixelType,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:[f,d]});return m.updateStatistics(),m}function a(e,t,i=1){if(1===i||!r(e))return e;const n=e.clone(),{pixels:o,width:s,height:l}=n,p=o[0],a=o[1];let c=0;for(let e=0;e<l;e++)for(let e=0;e<s;e++)"vector-uv"===t?(p[c]*=i,a[c]*=i):p[c]*=i,c++;return n.updateStatistics(),n}i.set("meter-per-second",1),i.set("kilometer-per-hour",.277778),i.set("knots",.514444),i.set("feet-per-second",.3048),i.set("mile-per-hour",.44704);export{p as convertVectorFieldData,a as convertVectorFieldUnit,n as getUnitConversionFactor,r as isValidPixelBlock};
