/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
const n=/^\s*"([\S\s]*)"\s*$/,t=/""/g,e=[","," ",";","|","\t"];function o(n,t){const e={},o=n.length;for(let r=0;r<o;r++)e[n[r]]=t[r];return e}function*r(n,t,e){let o=0;for(;o<=n.length;){const r=n.indexOf(t,o),i=n.substring(o,r>-1?r:void 0);o+=i.length+1,e&&!i.trim()||(yield i)}}function i(n){const t=n.includes("\r\n")?"\r\n":"\n";return r(n,t,!0)}function c(n,t){return r(n,t,!1)}function f(n){const t=n.trim();let o=0,r="";for(const n of e){const e=t.split(n).length;e>o&&(o=e,r=n)}return""===r?null:r}function*s(e,r,i){let f="",s="",l=0,d=[];n:for(;;){const{value:x,done:g}=e.next();if(g)return;const h=c(x,i);t:for(;;){const{value:e,done:o}=h.next();if(o)break t;if(f+=s+e,s="",l+=u(e),l%2==0){if(l>0){const e=n.exec(f);if(!e){d=[],f="",l=0;continue n}d.push(e[1].replace(t,'"'))}else d.push(f);f="",l=0}else s=i}0===l?(yield o(r,d),d=[]):s="\n"}}function u(n){let t=0,e=0;for(e=n.indexOf('"',e);e>=0;)t++,e=n.indexOf('"',e+1);return t}export{f as inferDelimiter,s as parseRows,c as readRowParts,i as readRows};
