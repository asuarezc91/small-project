/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{clone as n}from"../../core/lang.js";import{equals as t,isWebMercator as e,isWGS84 as i}from"./spatialReferenceUtils.js";import r from"../SpatialReference.js";import{earth as s}from"./Ellipsoid.js";function o(n){return 57.29577951308232*n}function a(n){return.017453292519943*n}function l(n){return null!=n.wkid||null!=n.wkt}const p=[0,0];function u(n,t,e,i,r){const s=n,o=r;if("x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,p,i);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,p,i),[o.xmax,o.ymax]=t(s.xmax,s.ymax,p,i);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const n="paths"in s?s.paths:s.rings,e=[];let r;for(let s=0;s<n.length;s++){const o=n[s];r=[],e.push(r);for(let n=0;n<o.length;n++)r.push(t(o[n][0],o[n][1],[0,0],i)),o[n].length>2&&r[n].push(o[n][2]),o[n].length>3&&r[n].push(o[n][3])}"paths"in o?o.paths=e:o.rings=e}else if("points"in s&&"points"in o){const n=s.points,e=[];for(let r=0;r<n.length;r++)e[r]=t(n[r][0],n[r][1],[0,0],i),n[r].length>2&&e[r].push(n[r][2]),n[r].length>3&&e[r].push(n[r][3]);o.points=e}return o.spatialReference=e,r}function f(n,r){const s=n&&(l(n)?n:n.spatialReference),o=r&&(l(r)?r:r.spatialReference);return(!n||!("type"in n)||"mesh"!==n.type)&&((!r||!("type"in r)||"mesh"!==r.type)&&(!(!s||!o)&&(!!t(o,s)||(e(o)&&i(s)||e(s)&&i(o)))))}function c(s,o){const a=s&&s.spatialReference,p=o&&(l(o)?o:o.spatialReference);return f(a,p)?t(a,p)?n(s):e(p)?u(s,h,r.WebMercator,!1,n(s)):i(p)?u(s,m,r.WGS84,!1,n(s)):null:null}function h(n,t,e=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=a(t);return e[0]=a(n)*s.radius,e[1]=s.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),e}function m(n,t,e=[0,0],i=!1){const r=o(n/s.radius);return e[0]=i?r:r-360*Math.floor((r+180)/360),e[1]=o(Math.PI/2-2*Math.atan(Math.exp(-1*t/s.radius))),e}function x(t,e=!1,i=n(t)){return u(t,h,r.WebMercator,e,i)}function g(t,e=!1,i=n(t)){return u(t,m,r.WGS84,e,i)}export{f as canProject,x as geographicToWebMercator,h as lngLatToXY,c as project,g as webMercatorToGeographic,m as xyToLngLat};
