/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{c as t}from"../../../chunks/vec3f64.js";import{t as n,n as o}from"../../../chunks/vec3.js";import{a as r}from"../../../chunks/mat3f64.js";import{georeference as e}from"./georeference.js";function a(){const{faceDescriptions:t,faceVertexOffsets:n,uvScales:o}=u,r=4*t.length,e=new Float64Array(3*r),a=new Float32Array(3*r),s=new Float32Array(2*r),i=new Uint32Array(2*t.length*3);let l=0,c=0,f=0,h=0;for(let r=0;r<t.length;r++){const u=t[r],p=l/3;for(const t of n)i[h++]=p+t;const w=u.corners;for(let t=0;t<4;t++){const n=w[t];let r=0;s[f++]=.25*o[t][0]+u.uvOrigin[0],s[f++]=u.uvOrigin[1]-.25*o[t][1];for(let t=0;t<3;t++)0!==u.axis[t]?(e[l++]=.5*u.axis[t],a[c++]=u.axis[t]):(e[l++]=.5*n[r++],a[c++]=0)}}return{position:e,normal:a,uv:s,faces:i}}function s(t=0){const n=Math.round(8*Math.pow(2,t)),o=2*n,r=(n-1)*(o+1)+2*o,e=new Float64Array(3*r),a=new Float32Array(3*r),s=new Float32Array(2*r),i=new Uint32Array(3*((n-1)*o*2));let l=0,c=0,f=0,u=0;for(let t=0;t<=n;t++){const r=t/n*Math.PI+.5*Math.PI,h=Math.cos(r),w=Math.sin(r);p[2]=w;const m=0===t||t===n,g=m?o-1:o;for(let r=0;r<=g;r++){const w=r/g*2*Math.PI;p[0]=-Math.sin(w)*h,p[1]=Math.cos(w)*h;for(let t=0;t<3;t++)e[l]=.5*p[t],a[l]=p[t],++l;s[c++]=(r+(m?.5:0))/o,s[c++]=t/n,0!==t&&r!==o&&(t!==n&&(i[f++]=u,i[f++]=u+1,i[f++]=u-o),1!==t&&(i[f++]=u,i[f++]=u-o,i[f++]=u-o-1)),u++}}return{position:e,normal:a,uv:s,faces:i}}function i(t=0){const n=Math.round(16*Math.pow(2,t)),o=4*(n+1)+2*n,r=new Float64Array(3*o),e=new Float32Array(3*o),a=new Float32Array(2*o),s=new Uint32Array(3*(4*n));let i=0,l=0,c=0,f=0,u=0;for(let t=0;t<=5;t++){const o=0===t||5===t,h=t<=1||t>=4,w=2===t||4===t,m=o?n-1:n;for(let g=0;g<=m;g++){const v=g/m*2*Math.PI,A=o?0:.5;p[0]=A*Math.sin(v),p[1]=A*-Math.cos(v),p[2]=t<=2?.5:-.5;for(let n=0;n<3;n++)r[i++]=p[n],e[l++]=h?2===n?t<=1?1:-1:0:2===n?0:p[n]/A;a[c++]=(g+(o?.5:0))/n,a[c++]=t<=1?1*t/3:t<=3?1*(t-2)/3+1/3:1*(t-4)/3+2/3,w||0===t||g===n||(5!==t&&(s[f++]=u,s[f++]=u+1,s[f++]=u-n),1!==t&&(s[f++]=u,s[f++]=u-n,s[f++]=u-n-1)),u++}}return{position:r,normal:e,uv:a,faces:s}}function l(t){const n=c.facingAxisOrderSwap[t],o=c.position,r=c.normal,e=new Float64Array(o.length),a=new Float32Array(r.length);let s=0;for(let t=0;t<4;t++){const t=s;for(let i=0;i<3;i++){const l=n[i],c=Math.abs(l)-1,f=l>=0?1:-1;e[s]=o[t+c]*f,a[s]=r[t+c]*f,s++}}return{position:e,normal:a,uv:new Float32Array(c.uv),faces:new Uint32Array(c.faces)}}const c={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function f(t,r,a){!function(t){for(let n=0;n<t.position.length;n+=3)t.position[n+2]+=.5}(t),function(t,r){if(null==r)return;const e="number"==typeof r?[r,r,r]:[null!=r.width?r.width:1,null!=r.depth?r.depth:1,null!=r.height?r.height:1];w[0]=e[0],w[4]=e[1],w[8]=e[2];for(let o=0;o<t.position.length;o+=3){for(let n=0;n<3;n++)p[n]=t.position[o+n];n(p,p,w);for(let n=0;n<3;n++)t.position[o+n]=p[n]}if(e[0]!==e[1]||e[1]!==e[2]){w[0]=1/e[0],w[4]=1/e[1],w[8]=1/e[2];for(let r=0;r<t.normal.length;r+=3){for(let n=0;n<3;n++)p[n]=t.normal[r+n];n(p,p,w),o(p,p);for(let n=0;n<3;n++)t.normal[r+n]=p[n]}}}(t,a&&a.size);const s=e(t,r,a);return{vertexAttributes:{position:s.position,normal:s.normal,uv:t.uv},components:[{faces:t.faces,material:a&&a.material||null}],spatialReference:r.spatialReference}}const u={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},h={south:0,east:1,north:2,west:3,up:4,down:5},p=t(),w=r();export{h as boxFaceOrder,f as convertUnitGeometry,a as createUnitSizeBox,i as createUnitSizeCylinder,l as createUnitSizePlane,s as createUnitSizeSphere};
