/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as r}from"../../chunks/tslib.es6.js";import"../../core/has.js";import{clone as t}from"../../core/lang.js";import o from"../../core/Logger.js";import{property as e}from"../../core/accessorSupport/decorators/property.js";import{cast as n}from"../../core/accessorSupport/decorators/cast.js";import{subclass as s}from"../../core/accessorSupport/decorators/subclass.js";import"../../core/urlUtils.js";import"../../core/uuid.js";import"../../portal/support/resourceExtension.js";import{JSONSupport as a}from"../../core/JSONSupport.js";var i;const l=o.getLogger("esri.geometry.support.MeshVertexAttributes");let p=i=class extends a{constructor(r){super(r),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(r){return u(r,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},l)}castPosition(r){r&&r instanceof Float32Array&&l.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");return u(r,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},l)}castUv(r){return u(r,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},l)}castNormal(r){return u(r,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},l)}castTangent(r){return u(r,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},l)}clone(){const r={position:t(this.position),uv:t(this.uv),normal:t(this.normal),tangent:t(this.tangent),color:t(this.color)};return new i(r)}};function c(r,t,o,e){const{loggerTag:n,stride:s}=t;return r.length%s!=0?(e.error(n,`Invalid array length, expected a multiple of ${s}`),new o([])):r}function u(r,t,o,e,n){if(!r)return r;if(r instanceof t)return c(r,e,t,n);for(const s of o)if(r instanceof s)return c(new t(r),e,t,n);if(Array.isArray(r))return c(new t(r),e,t,n);{const e=o.map((r=>`'${r.name}'`));return n.error(`Failed to set property, expected one of ${e}, but got ${r.constructor.name}`),new t([])}}function g(r,t,o){t[o]=function(r){const t=new Array(r.length);for(let o=0;o<r.length;o++)t[o]=r[o];return t}(r)}r([e({json:{write:g}})],p.prototype,"color",void 0),r([n("color")],p.prototype,"castColor",null),r([e({nonNullable:!0,json:{write:g}})],p.prototype,"position",void 0),r([n("position")],p.prototype,"castPosition",null),r([e({json:{write:g}})],p.prototype,"uv",void 0),r([n("uv")],p.prototype,"castUv",null),r([e({json:{write:g}})],p.prototype,"normal",void 0),r([n("normal")],p.prototype,"castNormal",null),r([e({json:{write:g}})],p.prototype,"tangent",void 0),r([n("tangent")],p.prototype,"castTangent",null),p=i=r([s("esri.geometry.support.MeshVertexAttributes")],p);var m=p;export default m;export{p as MeshVertexAttributes,u as castArray};
