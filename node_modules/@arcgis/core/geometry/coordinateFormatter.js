/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import n from"../core/Error.js";import e from"./SpatialReference.js";import t from"./Point.js";import{i as o,a as r,l as i,P as a,b as s,c,d as l,e as _,f as u}from"../chunks/pe.js";function d(){return o()}function f(){return r()}function S(){return i()}function g(n,o){const r=[];n=n.replace(/\u2032/g,"'");const i=M(o);return a.dms_to_geog(i,1,[n],r)?new t(r[0][0],r[0][1],o||e.WGS84):null}function w(n,o,r){const i=[],a=v(r);if(-1===a)return console.warn(`invalid conversionMode: ${r}`),null;const c=M(o);return s.mgrs_to_geog_extended(c,1,[n],a,i)?new t(i[0][0],i[0][1],o||e.WGS84):null}function E(n,o){const r=[];!o&&/\(.+27/.test(n)&&(o=e.GCS_NAD_1927);const i=M(o);return c.usng_to_geog(i,1,[n],r)?new t(r[0][0],r[0][1],o||e.WGS84):null}function m(n,o,r){const i=[],a=R(r);if(-1===a)return console.warn(`invalid conversionMode: ${r}`),null;const s=M(o);return l.utm_to_geog(s,1,[n],a,i)?new t(i[0][0],i[0][1],o||e.WGS84):null}function P(n,e,t=0){const o=[[n.x,n.y]],r=[],i=M(n.spatialReference);let s=0;switch(e){case"dd":s=a.geog_to_dd(i,1,o,t,r);break;case"ddm":s=a.geog_to_ddm(i,1,o,t,r);break;case"dms":s=a.geog_to_dms(i,1,o,t,r);break;default:return console.warn(`invalid format: ${e}`),null}return s?r[0]:null}function k(n,e,t=0,o=!1){const r=[[n.x,n.y]],i=[],a=M(n.spatialReference);let c=v(e);if(-1===c)return console.warn(`invalid conversionMode: ${e}`),null;o&&(c|=s.PE_MGRS_ADD_SPACES);return s.geog_to_mgrs_extended(a,1,r,t,!1,c,i)?i[0]:null}function G(n,e=0,t=!1){const o=[[n.x,n.y]],r=[],i=M(n.spatialReference);return c.geog_to_usng(i,1,o,e,!1,t,r)?r[0]:null}function p(n,e,t=!1){const o=[[n.x,n.y]],r=[],i=M(n.spatialReference);let a=R(e);if(-1===a)return console.warn(`invalid conversionMode: ${e}`),null;t&&(a|=l.PE_UTM_OPTS_ADD_SPACES);return l.geog_to_utm(i,1,o,a,r)?r[0]:null}function M(t){let o=null;if(t||(t=e.WGS84),t.wkid){if(o=_.geogcs(t.wkid),!o)throw new n("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!t.wkt)throw new n("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(o=_.fromString(u.PE_TYPE_GEOGCS,t.wkt),!o)throw new n("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return o}function v(n){let e=-1;switch(n){case"automatic":e=s.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":e=s.PE_MGRS_STYLE_NEW|s.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":e=s.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":e=s.PE_MGRS_STYLE_OLD|s.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":e=s.PE_MGRS_STYLE_OLD}return e}function R(n){let e=-1;switch(n){case"latitude-band-indicators":e=l.PE_UTM_OPTS_NONE;break;case"north-south-indicators":e=l.PE_UTM_OPTS_NS}return e}export{g as fromLatitudeLongitude,w as fromMgrs,E as fromUsng,m as fromUtm,d as isLoaded,f as isSupported,S as load,P as toLatitudeLongitude,k as toMgrs,G as toUsng,p as toUtm};
