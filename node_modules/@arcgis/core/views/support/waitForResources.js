/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{resolve as e,createResolver as i}from"../../core/promiseUtils.js";import{debug as r}from"../../core/scheduling.js";import{dispatch as n}from"../../core/accessorSupport/watch.js";import{whenNotOnce as t}from"../../core/watchUtils.js";function o(o){switch(o.type){case"2d":return function(e){const t=i();let o=performance.now();const a=function(){var i,t,o,a,s,u;if(n(),r.dispatch(),!e.ready||e.updating||!e.stationary||e.rendering||!0===(null==(i=e.layerViewManager)?void 0:i.updating)||!0===(null==(t=e.labelManager)?void 0:t.updating)||!0===(null==(o=e.graphicsView)?void 0:o.updating)||!0===(null==(a=e.magnifier)?void 0:a.visible)&&(null==(s=e._magnifierView)||!s.mask||null==(u=e._magnifierView)||!u.overlay)||e.allLayerViews.some((e=>!0===e.updating)))return!0;return!!e.allLayerViews.find((function(e){const i=!e.isFulfilled(),r=e.updating&&!e.suspended;return i||r}))};function s(){if(!e.destroyed&&a())o=null,setTimeout(s,16);else{o||(o=performance.now());performance.now()-o>=100?t():setTimeout(s,16)}}return setTimeout(s,16),t.promise}(o);case"3d":if(o)return n(),r.dispatch(),t(o,"updating")}return e()}export default o;
