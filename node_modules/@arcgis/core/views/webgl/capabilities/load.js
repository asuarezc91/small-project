/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import t from"./isWebGL2Context.js";import{createDisjointTimerQuery as e}from"./DisjointTimerQuery.js";import{load as r}from"./DrawBuffers.js";import{load as n}from"./Instancing.js";import{load as o}from"./LoseContext.js";import{load as _}from"./VertexArrayObjects.js";function u(u,i){const a=i&&i.disabledExtensions||{},f=i&&i.debugWebGLExtensions||{};let E,s,x,T,F,R,X,A,c,g,S=null,d=null,B=null,G=null;return{get drawBuffers(){return g||(g=r(u,a)),g},get instancing(){return E||(E=n(u)),E},get vao(){return s||(s=_(u,a)),s},get compressedTextureS3TC(){return x||(x=function(t,e){if(e.compressedTextureS3TC)return null;const r=t.getExtension("WEBGL_compressed_texture_s3tc");if(!r)return null;return{COMPRESSED_RGB_S3TC_DXT1:r.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:r.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:r.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:r.COMPRESSED_RGBA_S3TC_DXT5_EXT}}(u,a)),x},get textureFilterAnisotropic(){return T||(T=function(t,e){if(e.textureFilterAnisotropic)return null;const r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");if(!r)return null;return{MAX_TEXTURE_MAX_ANISOTROPY:r.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:r.TEXTURE_MAX_ANISOTROPY_EXT}}(u,a)),T},get disjointTimerQuery(){return F||(F=e(u,a)),F},get textureFloat(){return R||(R=function(e,r){if(t(e))return{textureFloat:!0,textureFloatLinear:!r.textureFloatLinear&&!!e.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!r.textureHalfFloatLinear&&!!e.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:e.HALF_FLOAT};if(e instanceof WebGLRenderingContext){const t=!r.textureHalfFloat&&e.getExtension("OES_texture_half_float");return{textureFloat:!r.textureFloat&&!!e.getExtension("OES_texture_float"),textureFloatLinear:!r.textureFloatLinear&&!!e.getExtension("OES_texture_float_linear"),textureHalfFloat:!!t,textureHalfFloatLinear:!r.textureHalfFloatLinear&&!!e.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:t?t.HALF_FLOAT_OES:void 0}}return null}(u,a)),R},get colorBufferFloat(){return X||(X=function(e,r){if(t(e)){const t=!r.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float"),n=!r.colorBufferFloat&&e.getExtension("EXT_color_buffer_float");return t||n?{textureFloat:!!n,textureHalfFloat:!!t,R16F:e.R16F,RG16F:e.RG16F,RGBA16F:e.RGBA16F,R32F:e.R32F,RG32F:e.RG32F,RGBA32F:e.RGBA32F,R11F_G11F_B10F:e.R11F_G11F_B10F,RGB16F:e.RGB16F}:null}if(e instanceof WebGLRenderingContext){const t=!r.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float"),n=!r.colorBufferFloat&&e.getExtension("WEBGL_color_buffer_float");return t||n?{textureFloat:!!n,textureHalfFloat:!!t,RGBA16F:t?t.RGBA16F_EXT:void 0,RGB16F:t?t.RGB16F_EXT:void 0,RGBA32F:n?n.RGBA32F_EXT:void 0}:null}return null}(u,a)),X},get blendMinMax(){return A||(A=function(e,r){if(t(e))return{MIN:e.MIN,MAX:e.MAX};if(r.blendMinMax)return null;{const t=e.getExtension("EXT_blend_minmax");return t?{MIN:t.MIN_EXT,MAX:t.MAX_EXT}:null}}(u,a)),A},get depthTexture(){return null===S&&(S=l(u,a,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"])),S},get standardDerivatives(){return null===d&&(d=l(u,a,"standardDerivatives",!0,["OES_standard_derivatives"])),d},get shaderTextureLOD(){return null===B&&(B=l(u,a,"shaderTextureLOD",!0,["EXT_shader_texture_lod"])),B},get fragDepth(){return null===G&&(G=l(u,a,"fragDepth",!0,["EXT_frag_depth"])),G},get loseContext(){return c||(c=o(u,f)),c}}}function l(e,r,n,o,_){if(o&&t(e))return!0;if(r[n])return!1;for(const t of _)if(e.getExtension(t))return!0;return!1}export{u as loadCapabilities};
