/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import s from"./WGLDisplayList.js";import{serializeList as t}from"./util/serializationUtils.js";import i from"./WGLDisplayObject.js";function e(s){const t=[[],[],[],[],[]],i=s;for(const s of i)for(const i of s.displayRecords)t[i.geometryType].push(i);return t}class r{constructor(){}get displayObjectRegistry(){if(!this._displayObjectRegistry){this._displayObjectRegistry=new Map;for(const s of this.displayObjects)this._displayObjectRegistry.set(s.id,s)}return this._displayObjectRegistry}get displayList(){return this._displayList}computeDisplayList(t){if(this._displayList=new s(t),t)for(const s of this.displayObjects)for(const t of s.displayRecords)this._displayList.addToList(t);else{const s=e(this.displayObjects),t=s.length;for(let i=0;i<t;++i){const t=s[i];this._displayList.addToList(t)}}}clone(){const s=new r;return this.displayObjects&&(s.displayObjects=this.displayObjects.map((s=>s.clone()))),s}serialize(s){return t(s,this.displayObjects),s}_deserializeObjects(s){const t=s.readInt32(),e=new Array(t),r=new Map;for(let t=0;t<e.length;++t){const l=i.deserialize(s);e[t]=l,r.set(l.id,l)}this.displayObjects=e,this._displayList=null,this._displayObjectRegistry=r}static deserialize(s){const t=new r;return t._deserializeObjects(s),t}}export default r;export{e as groupRecordsByGeometryType};
