/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{clamp as t}from"../../../../../core/mathUtils.js";import{meterIn as n}from"../../../../../renderers/support/lengthUtils.js";const e=Math.PI;function r(r,i){switch(i.transformationType){case"additive":return function(t,n){const e=a(n.minSize,t);return t+(e||n.minDataValue)}(r,i);case"constant":return function(t,n){const e=t.stops;let r=e&&e.length&&e[0].size;null==r&&(r=t.minSize);return a(r,n)}(i,r);case"clamped-linear":return function(t,n){const e=(t-n.minDataValue)/(n.maxDataValue-n.minDataValue),r=a(n.minSize,t),i=a(n.maxSize,t);if(t<=n.minDataValue)return r;if(t>=n.maxDataValue)return i;return r+e*(i-r)}(r,i);case"proportional":return function(n,e){const r=n/e.minDataValue,i=a(e.minSize,n),u=a(e.maxSize,n);let s=null;return s=r*i,t(s,i,u)}(r,i);case"stops":return function(t,n){const[e,r,i]=function(t,n){if(!n)return;let e=0,r=n.length-1;return n.some(((n,a)=>t<n?(r=a,!0):(e=a,!1))),[e,r,(t-n[e])/(n[r]-n[e])]}(t,n.cache.ipData);if(e===r)return a(n.stops[e].size,t);{const u=a(n.stops[e].size,t);return u+(a(n.stops[r].size,t)-u)*i}}(r,i);case"real-world-size":return function(r,i){const u=n[i.valueUnit],s=a(i.minSize,r),o=a(i.maxSize,r),{valueRepresentation:c}=i;let l=null;l="area"===c?2*Math.sqrt(r/e)/u:"radius"===c||"distance"===c?2*r/u:r/u;return t(l,s,o)}(r,i);case"identity":return r;case"unknown":return null}}function a(t,n){return"number"==typeof t?t:r(n,t)}export{r as getSizeForValueSimple};
