/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{createResolver as e,resolve as r}from"../../../../../core/promiseUtils.js";function s(e,r,s){return e.acquire().then((()=>r(s))).then((()=>e.release())).catch((r=>{throw e.release(),r}))}export default class{constructor(){this._resolver=null}isHeld(){return!!this._resolver}acquire(){return this._resolver?this._resolver.promise.then((()=>this.acquire())):(this._resolver=e(),r())}release(){const e=this._resolver;this._resolver=null,e.resolve()}}export{s as withLock};
