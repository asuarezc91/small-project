/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as o}from"../../chunks/tslib.es6.js";import"../../core/has.js";import"../../core/Logger.js";import"../../core/accessorSupport/ensureType.js";import{property as e}from"../../core/accessorSupport/decorators/property.js";import{subclass as t}from"../../core/accessorSupport/decorators/subclass.js";import"../../core/urlUtils.js";import"../../core/uuid.js";import"../../portal/support/resourceExtension.js";import r from"../../geometry/Extent.js";import s from"../../geometry/Polygon.js";import"../../geometry.js";import i from"../../core/Evented.js";import n from"../../layers/support/LOD.js";import{GeometryConstraint as a}from"./constraints/GeometryConstraint.js";import m from"./constraints/RotationConstraint.js";import l from"./constraints/ZoomConstraint.js";const p={base:null,key:"type",typeMap:{extent:r,polygon:s}};let c=class extends i.EventedAccessor{constructor(){super(...arguments),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}initialize(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null)}set geometry(o){o?this._set("geometry",o):this._set("geometry",null)}get _defaultLODs(){const o=this.get("view.defaultsFromMap.tileInfo"),e=this.get("view.spatialReference");return o&&e&&o.spatialReference.equals(e)?o.lods:null}get _geometry(){return new a({geometry:this.geometry,spatialReference:this.view.spatialReference})}get _rotation(){return new m({rotationEnabled:this.rotationEnabled})}get _zoom(){return new l({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}canZoomInTo(o){const e=this.effectiveMaxScale;return 0===e||o>=e}canZoomOutTo(o){const e=this.effectiveMinScale;return 0===e||o<=e}constrain(o,e){return this._zoom.constrain(o,e),this._rotation.constrain(o,e),this._geometry.constrain(o,e),o}constrainByGeometry(o){return this._geometry.constrain(o)}fit(o){return this._zoom.fit(o)}zoomToScale(o){return this._zoom.zoomToScale(o)}scaleToZoom(o){return this._zoom.scaleToZoom(o)}snapScale(o){return this._zoom.snapToClosestScale(o)}snapToNextScale(o){return this._zoom.snapToNextScale(o)}snapToPreviousScale(o){return this._zoom.snapToPreviousScale(o)}};o([e({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],c.prototype,"effectiveLODs",void 0),o([e({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],c.prototype,"effectiveMinScale",void 0),o([e({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],c.prototype,"effectiveMaxScale",void 0),o([e({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],c.prototype,"effectiveMinZoom",void 0),o([e({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],c.prototype,"effectiveMaxZoom",void 0),o([e({types:p,value:null})],c.prototype,"geometry",null),o([e({type:[n]})],c.prototype,"lods",void 0),o([e()],c.prototype,"minScale",void 0),o([e()],c.prototype,"maxScale",void 0),o([e()],c.prototype,"minZoom",void 0),o([e()],c.prototype,"maxZoom",void 0),o([e()],c.prototype,"rotationEnabled",void 0),o([e()],c.prototype,"snapToZoom",void 0),o([e()],c.prototype,"view",void 0),o([e({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],c.prototype,"_defaultLODs",null),o([e({type:a,dependsOn:["geometry","view.spatialReference"]})],c.prototype,"_geometry",null),o([e({type:m,dependsOn:["rotationEnabled"]})],c.prototype,"_rotation",null),o([e({readOnly:!0,type:l,dependsOn:["lods","minZoom","maxZoom","minScale","maxScale","snapToZoom","_defaultLODs"]})],c.prototype,"_zoom",null),c=o([t("esri.views.2d.MapViewConstraints")],c);var f=c;export default f;
