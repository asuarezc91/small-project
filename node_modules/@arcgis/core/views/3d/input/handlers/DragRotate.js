/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{createScreenPointArray as t}from"../../../../core/screenUtils.js";import{InputHandler as r}from"../../../input/InputHandler.js";import{eventMatchesMousePointerAction as e}from"../../../input/handlers/support.js";import{RotateController as o}from"../../state/controllers/RotateController.js";class i extends r{constructor(t,r,e,o){super(!0),this.view=t,this.pointerAction=r,this.pivotPoint=e,this.registerIncoming("drag",o,(t=>this.handleDrag(t)))}handleDrag(r){const i=r.data;if(i.pointers.size>1)return;if(!e(r.data,this.pointerAction))return;const a=t(i.center.x,i.center.y);switch(i.action){case"start":this.cameraController&&(this.cameraController.end(),this.cameraController=null),this.cameraController=new o({view:this.view,pivot:this.pivotPoint}),this.view.state.switchCameraController(this.cameraController),this.cameraController.begin(a);break;case"update":this.cameraController&&this.cameraController.update(a);break;case"end":this.cameraController&&(this.cameraController.end(),this.cameraController=null)}r.stopPropagation()}}export{i as DragRotate};
