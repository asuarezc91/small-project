/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{isNone as t}from"../../../../core/maybe.js";import{c as e}from"../../../../chunks/vec3f64.js";import{t as o,b as r}from"../../../../chunks/vec3.js";import{projectBuffer as n}from"../../../../geometry/projection.js";import{set as a,NEGATIVE_INFINITY as m,expandWithBuffer as s,ZERO as c,create as f}from"../../../../geometry/support/aaBoundingBox.js";function i(t,e,n,a){const m=e.getComponentAabb(n,t,p),s=e.getObjectTransform(n);for(let t=0;t<8;++t)b[0]=1&t?m[0]:m[3],b[1]=2&t?m[1]:m[4],b[2]=4&t?m[2]:m[5],o(b,b,s.rotationScale),r(b,b,s.position),a[3*t]=b[0],a[3*t+1]=b[1],a[3*t+2]=b[2];return a}function u(e,o,r){const f=new Float64Array(24);return u=>{let l=u.meta.featureExtents;if(t(l)){l=new Float64Array(6*u.meta.featureIds.length),u.meta.featureExtents=l;for(let t=0;t<l.length;t+=6)l[t]=Number.POSITIVE_INFINITY}const p=new Float64Array(l.buffer,6*u.index*Float64Array.BYTES_PER_ELEMENT,6);return p[0]===Number.POSITIVE_INFINITY&&(i(u.index,r,u.meta.objectHandle,f),n(f,o,0,f,e,0,8)?(a(p,m),s(p,f,0,8)):a(p,c)),p}}function l(t,e,n,a){const m=e.getComponentAabb(n,t,p),s=e.getObjectTransform(n);a[0]=0,a[1]=0,a[2]=0;for(let t=0;t<8;++t)b[0]=1&t?m[0]:m[3],b[1]=2&t?m[1]:m[4],b[2]=m[5],o(b,b,s.rotationScale),r(b,b,s.position),a[0]+=b[0],a[1]+=b[1],a[2]+=b[2];return a[0]/=8,a[1]/=8,a[2]/=8,a}const p=f(),b=e();export{i as boundingBoxCornerPoints,l as boundingBoxTop,u as createGetFeatureExtent};
