/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{createAbortController as e,onAbortOrThrow as t,always as r}from"../../../../core/promiseUtils.js";class s{constructor(e){this.requester=e,this.activeRequests=new Set}get busy(){return this.requester.busy}request(s,l,o){const a=e(),n=t(o,(()=>a.abort()));o={...o,signal:a.signal};const u=this.requester.request(s,l,o),i={response:u,abortController:a,abortHandle:n};return this.activeRequests.add(i),r(u,(()=>{var e;i.abortController=null,null==(e=i.abortHandle)||e.remove(),i.abortHandle=null,this.activeRequests.delete(i)})),u}cancelAll(){this.activeRequests.forEach((e=>{var t,r;null==(t=e.abortController)||t.abort(),e.abortController=null,null==(r=e.abortHandle)||r.remove()})),this.activeRequests.clear()}}export default s;export{s as I3SStreamDataController};
