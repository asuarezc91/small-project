/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../../../../chunks/tslib.es6.js";import"../../../../core/has.js";import{isNone as r}from"../../../../core/maybe.js";import"../../../../core/Logger.js";import"../../../../core/accessorSupport/ensureType.js";import{property as s}from"../../../../core/accessorSupport/decorators/property.js";import{subclass as o}from"../../../../core/accessorSupport/decorators/subclass.js";import"../../../../core/urlUtils.js";import"../../../../core/uuid.js";import"../../../../portal/support/resourceExtension.js";import t from"../../../../geometry/Polygon.js";import"../../../../geometry.js";import{c as i}from"../../../../chunks/vec3f64.js";import{g as p,i as c}from"../../../../chunks/vec3.js";import{n as u}from"../../../../chunks/mat4.js";import{projectBuffer as n}from"../../../../geometry/projection.js";import{a as l}from"../../../../chunks/mat4f64.js";import{TileTree3DDebugger as a}from"./TileTree3DDebugger.js";let m=class extends a{constructor(e){super(e)}update(){if(this.clear(),!this.enabled)return;const e=this.lv.getVisibleNodes(),s=this.view.renderSpatialReference,o=this.nodeSR,i=e.map((e=>function(e,s,o){const i=e.serviceObb;if(r(i)||r(s))return null;u(h,i.quaternion),p(j,i.center),n(j,o,0,j,s,0,1),h[12]=j[0],h[13]=j[1],h[14]=j[2];const l=[[],[],[]];p(j,i.halfSize),c(j,j,h),n(j,s,0,j,o,0,1),l[0].push([j[0],j[1]]),p(j,i.halfSize),j[0]=-j[0],c(j,j,h),n(j,s,0,j,o,0,1),l[0].push([j[0],j[1]]),p(j,i.halfSize),j[0]=-j[0],j[1]=-j[1],c(j,j,h),n(j,s,0,j,o,0,1),l[0].push([j[0],j[1]]),p(j,i.halfSize),j[1]=-j[1],c(j,j,h),n(j,s,0,j,o,0,1),l[0].push([j[0],j[1]]),l[1].push(l[0][0]),l[1].push(l[0][1]),p(j,i.halfSize),j[0]=-j[0],j[2]=-j[2],c(j,j,h),n(j,s,0,j,o,0,1),l[1].push([j[0],j[1]]),p(j,i.halfSize),j[2]=-j[2],c(j,j,h),n(j,s,0,j,o,0,1),l[1].push([j[0],j[1]]),l[2].push(l[0][0]),l[2].push(l[0][3]),p(j,i.halfSize),j[1]=-j[1],j[2]=-j[2],c(j,j,h),n(j,s,0,j,o,0,1),l[2].push([j[0],j[1]]),l[2].push(l[1][3]);const a=new t({rings:l,spatialReference:o});return{lij:[e.level,e.childCount],id:e.id,geometry:a}}(e,s,o))).sort(((e,r)=>e.lij[0]===r.lij[0]?e.id>r.id?-1:1:e.lij[0]-r.lij[0]));this._update(i,(e=>e.geometry),{getLabel:e=>`${e.lij[0]}/${e.id}/${e.lij[1]}`})}};e([s({constructOnly:!0})],m.prototype,"lv",void 0),e([s({constructOnly:!0})],m.prototype,"nodeSR",void 0),m=e([o("esri.views.3d.layers.support.I3STreeDebugger")],m);const h=l(),j=i();export{m as I3STreeDebugger};
