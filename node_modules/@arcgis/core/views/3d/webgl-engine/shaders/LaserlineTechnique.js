/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as o}from"../../../../chunks/tslib.es6.js";import{deg2rad as e}from"../../../../core/mathUtils.js";import{ReloadableShaderModule as t}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as r}from"../core/shaderTechnique/ShaderTechnique.js";import{ShaderTechniqueConfiguration as i,parameter as n}from"../core/shaderTechnique/ShaderTechniqueConfiguration.js";import{Default3D as a}from"../lib/DefaultVertexAttributeLocations.js";import l from"../../../webgl/Program.js";import{makePipelineState as s,simpleBlendingParams as h,defaultColorWriteParams as f}from"../../../webgl/renderState.js";import{d as p,L as m}from"../../../../chunks/Laserlines.glsl.js";class d extends r{initializeProgram(o){const e=d.shader.get(),t=this.configuration,r=e.build(t);return new l(o.rctx,r.generateSource("vertex"),r.generateSource("fragment"),a)}bind(o,t){this.program.setUniform3fv("innerColor",o.innerColor),this.program.setUniform1f("innerWidth",o.innerWidth*t.pixelRatio),this.program.setUniform3fv("glowColor",o.glowColor),this.program.setUniform1f("glowWidth",o.glowWidth*t.pixelRatio),this.program.setUniform1f("glowFalloff",o.glowFalloff),this.program.setUniform1f("globalAlpha",o.globalAlpha),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=o.globalAlphaContrastBoost?o.globalAlphaContrastBoost:1);const r=null!=o.angleCutoff?o.angleCutoff:p;this.program.setUniform2f("angleCutoff",Math.cos(r),Math.cos(Math.max(0,r-e(2)))),this.configuration.intersectsLineEnabled&&this.program.setUniform1f("perScreenPixelRatio",t.perScreenPixelRatio)}initializePipeline(){return s({blending:h(1,771),colorWrite:f})}}d.shader=new t(m,(()=>import("./Laserlines.glsl.js")));class g extends i{constructor(){super(...arguments),this.heightManifoldEnabled=!1,this.pointDistanceEnabled=!1,this.lineVerticalPlaneEnabled=!1,this.intersectsLineEnabled=!1,this.contrastControlEnabled=!1}}o([n()],g.prototype,"heightManifoldEnabled",void 0),o([n()],g.prototype,"pointDistanceEnabled",void 0),o([n()],g.prototype,"lineVerticalPlaneEnabled",void 0),o([n()],g.prototype,"intersectsLineEnabled",void 0),o([n()],g.prototype,"contrastControlEnabled",void 0);export{d as LaserlineTechnique,g as LaserlineTechniqueConfiguration};
