/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as r}from"../../../../chunks/tslib.es6.js";import{t as o}from"../../../../chunks/mat4.js";import{a as t}from"../../../../chunks/mat4f64.js";import{ReloadableShaderModule as e}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as i}from"../core/shaderTechnique/ShaderTechnique.js";import{ShaderTechniqueConfiguration as a,parameter as n}from"../core/shaderTechnique/ShaderTechniqueConfiguration.js";import s from"../../../webgl/Program.js";import{makePipelineState as l,simpleBlendingParams as m,defaultColorWriteParams as h}from"../../../webgl/renderState.js";import{L as f}from"../../../../chunks/LaserlinePath.glsl.js";class p extends i{initializeProgram(r){const o=p.shader.get(),t=this.configuration,e=o.build(t);return new s(r.rctx,e.generateSource("vertex"),e.generateSource("fragment"),p.attributeLocations)}bind(r,t,e){this.program.setUniform3fv("innerColor",r.innerColor),this.program.setUniform1f("innerWidth",r.innerWidth*e.pixelRatio),this.program.setUniform3fv("glowColor",r.glowColor),this.program.setUniform1f("glowWidth",r.glowWidth*e.pixelRatio),this.program.setUniform1f("glowFalloff",r.glowFalloff),this.program.setUniform1f("globalAlpha",r.globalAlpha),this.program.setUniform1f("perScreenPixelRatio",e.perScreenPixelRatio),this.program.setUniform2f("pixelToNDC",2/e.fullWidth,2/e.fullHeight),this.program.setUniformMatrix4fv("uProjectionMatrix",e.projectionMatrix),o(c,e.viewMatrix,t),this.program.setUniformMatrix4fv("uModelViewMatrix",c),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=r.globalAlphaContrastBoost?r.globalAlphaContrastBoost:1)}initializePipeline(){return l({blending:m(1,771),colorWrite:h})}bindPipelineState(r){r.setPipelineState(this.pipeline)}}p.shader=new e(f,(()=>import("./LaserlinePath.glsl.js"))),p.attributeLocations={start:0,end:1,up:2,extrude:3};class g extends a{constructor(){super(...arguments),this.contrastControlEnabled=!1}}r([n()],g.prototype,"contrastControlEnabled",void 0);const c=t();export{p as LaserlinePathTechnique,g as LaserlinePathTechniqueConfiguration};
