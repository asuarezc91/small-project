/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{glsl as r}from"../../shaderModules/interfaces.js";function o(o){o.fragment.uniforms.add("lastFrameColorMap","sampler2D"),o.fragment.uniforms.add("reprojectionMat","mat4"),o.fragment.uniforms.add("rpProjectionMat","mat4"),o.fragment.code.add(r`
  vec2 reprojectionCoordinate(vec3 projectionCoordinate)
  {
    vec4 zw = rpProjectionMat * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);
    vec4 reprojectedCoord = reprojectionMat * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);
    reprojectedCoord.xy /= reprojectedCoord.w;
    return reprojectedCoord.xy*0.5 + 0.5;
  }
  `)}!function(r){r.bindUniforms=function(r,o,e){r.setUniform1i("lastFrameColorMap",e.lastFrameColorTextureID),o.bindTexture(e.lastFrameColorTexture,e.lastFrameColorTextureID),r.setUniformMatrix4fv("reprojectionMat",e.reprojectionMat),r.setUniformMatrix4fv("rpProjectionMat",e.camera.projectionMatrix)}}(o||(o={}));export{o as Reprojection};
