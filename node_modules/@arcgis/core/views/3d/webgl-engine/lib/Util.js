/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{clamp as t}from"../../../../core/mathUtils.js";import{c as n}from"../../../../chunks/vec3f64.js";import{i as r}from"../../../../chunks/mat4.js";import{a as o}from"../../../../chunks/vec2f64.js";import{a}from"../../../../chunks/vec4f64.js";import{s as u}from"../../../../chunks/vec2.js";import{t as c}from"../../../../chunks/vec4.js";const s=a();class e{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}const i={POSITION:"position",NORMAL:"normal",UV0:"uv0",UVMAPSPACE:"uvMapSpace",MEANVERTEXPOSITION:"meanVertexPosition",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",BOUND1:"bound1",BOUND2:"bound2",BOUND3:"bound3",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",TANGENT:"tangent"};function f(t,n){if(!t){n=n||"assert";const t=new Error(n);throw t.stack&&console.log(t.stack),new e(n)}}function h(t,n){t||(n=n||"",console.warn("Verify failed: "+n+"\n"+new Error("verify").stack))}function M(n){return t(Math.round(32767*n),-32767,32767)}function l(t,n){const r=Math.abs(t[0]),o=Math.abs(t[1]),a=1/(r+o+Math.abs(t[2])),u=r*a,c=o*a,s=Math.min(t[2]*a,0);n[0]=(t[0]<0?-1:1)*(u-s),n[1]=(t[1]<0?-1:1)*(c-s)}function m(t,n){return void 0===t?n:t}function p(t){return[((t=Math.floor(t))>>16&255)/255,(t>>8&255)/255,(255&t)/255]}function O(n){return"0x"+((t(Math.round(255*n[0]),0,255)<<16)+(t(Math.round(255*n[1]),0,255)<<8)+t(Math.round(255*n[2]),0,255)).toString(16)}function g(t){const n=t.toString(16);return"00000000".substr(0,8-n.length)+n}function S(t,r,o,a,u,c,s,e,i=n()){const f=1e-5,h=a[s]-o[c],M=a[s+1]-o[c+1],l=a[s+2]-o[c+2],m=u[e]-o[c],p=u[e+1]-o[c+1],O=u[e+2]-o[c+2],g=r[1]*O-p*r[2],S=r[2]*m-O*r[0],d=r[0]*p-m*r[1],v=h*g+M*S+l*d;if(v>-f&&v<f)return!1;const k=1/v,A=t[0]-o[c],E=t[1]-o[c+1],N=t[2]-o[c+2];if(i[1]=k*(A*g+E*S+N*d),i[1]<0||i[1]>1)return!1;const U=E*l-M*N,b=N*h-l*A,j=A*M-h*E;return i[2]=k*(r[0]*U+r[1]*b+r[2]*j),!(i[2]<0||i[1]+i[2]>1)&&(i[0]=k*(m*U+p*b+O*j),!0)}function d(t,n,r,o){let a,u=(r[0]-t[0])/n[0],c=(o[0]-t[0])/n[0];u>c&&(a=u,u=c,c=a);let s=(r[1]-t[1])/n[1],e=(o[1]-t[1])/n[1];if(s>e&&(a=s,s=e,e=a),u>e||s>c)return!1;s>u&&(u=s),e<c&&(c=e);let i=(r[2]-t[2])/n[2],f=(o[2]-t[2])/n[2];return i>f&&(a=i,i=f,f=a),!(u>f||i>c)&&(f<c&&(c=f),!(c<0))}function v(t,n,r,a,u,c=o()){const s=(a[u]-r[u])*(n[0]-t[0])-(a[0]-r[0])*(n[u]-t[u]),e=(a[0]-r[0])*(t[u]-r[u])-(a[u]-r[u])*(t[0]-r[0]);if(0===s)return!1;const i=e/s;return c[0]=t[0]+i*(n[0]-t[0]),c[1]=t[u]+i*(n[u]-t[u]),!0}function k(t,n,r,o,a){a||(a=t),s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=1,c(s,s,n),a.length>2&&(a[2]=-s[2]),c(s,s,r),f(0!==s[3]),a[0]=s[0]/s[3],a[1]=s[1]/s[3],a[2]=s[2]/s[3],a[0]=(.5*a[0]+.5)*o[2]+o[0],a[1]=(.5*a[1]+.5)*o[3]+o[1]}function A(t){for(const n in t)return n}function E(t){return t[A(t)]}function N(t){for(const n in t)return!1;return!0}function U(t,n){return Math.log(t)/Math.log(n)}function b(t,n){t[12]=n[0],t[13]=n[1],t[14]=n[2]}function j(t,n,r,o){t[12]=n,t[13]=r,t[14]=o}function P(t,r=n()){return r[0]=t[12],r[1]=t[13],r[2]=t[14],r}function w(t,n){return b(t=r(t),n),t}function x(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]}function C(t,n,r){return 2*Math.atan(r*Math.tan(.5*t)/n)}function I(t,n,r){return 2*Math.atan(n*Math.tan(.5*t)/r)}function T(t,n,r){return 2*Math.atan(Math.sqrt(n*n+r*r)*Math.tan(.5*t)/n)}function V(t,n,r){return 2*Math.atan(Math.sqrt(n*n+r*r)*Math.tan(.5*t)/r)}function q(t,n,r){return 2*Math.atan(n*Math.tan(.5*t)/Math.sqrt(n*n+r*r))}function y(t,n,r){return 2*Math.atan(r*Math.tan(.5*t)/Math.sqrt(n*n+r*r))}function B(n,r,o=0){const a=t(n,0,X);for(let t=0;t<4;t++)r[o+t]=Math.floor(256*((u=a*R[t])-Math.floor(u)));var u}function L(t,n=0){let r=0;for(let o=0;o<4;o++)r+=t[n+o]*D[o];return r}const R=[1,256,65536,16777216],D=[1/256,1/65536,1/16777216,1/4294967296],X=L(new Uint8ClampedArray([255,255,255,255]));function z(t,n,r,o,a){const c=t;0===t[11]?(o[0]=2/(n*c[0]),o[1]=2/(r*c[5]),o[2]=(1+c[12])/c[0],o[3]=(1+c[13])/c[5],u(a,0,1)):(o[0]=-2/(n*c[0]),o[1]=-2/(r*c[5]),o[2]=(1-c[8])/c[0],o[3]=(1-c[9])/c[5],u(a,1,0))}export{e as AssertException,i as VertexAttrConstants,f as assert,w as createTranslationMatrix,g as dec2hex,M as encodeInt16,l as encodeNormal,m as fallbackIfUndefined,q as fovd2fovx,y as fovd2fovy,T as fovx2fovd,C as fovx2fovy,V as fovy2fovd,I as fovy2fovx,A as getFirstObjectKey,E as getFirstObjectValue,P as getMatrixTranslation,p as hex2rgb,z as inverseProjectionInfo,x as isTranslationMatrix,U as logWithBase,N as objectEmpty,B as packFloatRGBA,k as project,d as rayBoxTest,v as rayRay2D,S as rayTriangle3D,O as rgb2hex,b as setMatrixTranslation,j as setMatrixTranslation3,L as unpackFloatRGBA,h as verify};
