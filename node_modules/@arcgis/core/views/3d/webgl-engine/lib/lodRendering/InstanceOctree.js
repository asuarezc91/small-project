/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{c as t}from"../../../../../chunks/vec3f64.js";import{i as e}from"../../../../../chunks/vec3.js";import{maxScale as s}from"../../../support/mathUtils.js";import{a as n}from"../../../../../chunks/mat4f64.js";import i from"../Octree.js";class r extends i{constructor(e,s){super({getCenter:t=>{const e=this._instanceData.view.boundingSphere,s=this._tmpCenter;return s[0]=e.get(t,0),s[1]=e.get(t,1),s[2]=e.get(t,2),s},getRadius:t=>this._instanceData.view.boundingSphere.get(t,3)},{maximumDepth:25}),this._tmpCenter=t(),this._tmpMat4=n(),this._instanceData=e,this._boundingSphere=s}addInstance(t){const n=this._instanceData.view.boundingSphere,i=this._instanceData.getCombinedModelTransform(t,this._tmpMat4),r=e(this._tmpCenter,this._boundingSphere.center,i),a=this._boundingSphere.radius*s(i);n.set(t,0,r[0]),n.set(t,1,r[1]),n.set(t,2,r[2]),n.set(t,3,a),this.add(t)}removeInstance(t){this.remove(t)}}export{r as InstanceOctree};
