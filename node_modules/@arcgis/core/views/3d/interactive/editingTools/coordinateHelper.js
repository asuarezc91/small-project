/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{getInfo as e}from"../../../../geometry/support/spatialReferenceUtils.js";import t from"../../../../geometry/Point.js";import"../../../../geometry.js";import{f as r,c as a,d as n}from"../../../../chunks/vec3f64.js";import{e as i}from"../../../../chunks/vec3.js";import{a as s,f as o,d as u}from"../../../../chunks/vec2f64.js";import{a as h,b as p,f as l}from"../../../../chunks/vec4f64.js";import{m as c}from"../../../../chunks/vec2.js";import{l as f}from"../../../../chunks/vec4.js";class m{constructor(e,t){this.spatialReference=e,this.viewingMode=t,this._unnormalizationInfo=z(e,t)}tag(e){return e}createNew(){return this.tag(s())}fromPoint(e){return this.tag(o(e.x,e.y))}fromArray(e){return this.tag(o(e[0],e[1]))}toArray(e){return[e[0],e[1]]}clone(e){return this.tag(u(e))}toPoint(e,t){return t.x=e[0],t.y=e[1],t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}createPoint(e){return new t({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}createPointFromArray(e){return new t({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}createDehydratedPoint(e){return{x:e[0],y:e[1],z:void 0,m:void 0,hasZ:!1,hasM:!1,spatialReference:this.spatialReference,type:"point"}}lerp(e,t,r,a){return c(a,e,t,r)}addDelta(e,t,r){e[0]+=t,e[1]+=r}pointToArray(e){return[e.x,e.y]}zFromArray(e){}hasZ(){return!1}unnormalize(e){R(e,this._unnormalizationInfo)}fromXYZ(e){return this.tag(o(e[0],e[1]))}toXYZ(e,t=0){return r(e[0],e[1],t)}}class y{constructor(e,t,r){this.valueType=e,this.spatialReference=t,this._unnormalizationInfo=z(t,r)}tag(e){return e}createNew(){return this.tag(a())}fromPoint(e){return this.tag(r(e.x,e.y,0===this.valueType?e.z:e.m))}fromArray(e){return this.tag(r(e[0],e[1],e[2]||0))}toArray(e){return[e[0],e[1],e[2]]}clone(e){return this.tag(n(e))}toPoint(e,t){return t.x=e[0],t.y=e[1],0===this.valueType?(t.z=e[2],t.hasZ=!0,t.hasM=!1):(t.m=e[2],t.hasZ=!1,t.hasM=!0),t.spatialReference=this.spatialReference,t}createPoint(e){return new t({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}createPointFromArray(e){return new t({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}createDehydratedPoint(e){const t=0===this.valueType,r=1===this.valueType;return{x:e[0],y:e[1],z:t?e[2]:void 0,m:r?e[2]:void 0,hasZ:t,hasM:r,spatialReference:this.spatialReference,type:"point"}}lerp(e,t,r,a){return i(a,e,t,r)}addDelta(e,t,r,a){e[0]+=t,e[1]+=r,0===this.valueType&&(e[2]+=a)}pointToArray(e){return 0===this.valueType?[e.x,e.y,e.z]:[e.x,e.y,e.m]}zFromArray(e){return 0===this.valueType?e[2]:void 0}hasZ(){return 0===this.valueType}unnormalize(e){R(e,this._unnormalizationInfo)}fromXYZ(e,t=0,a=0){return this.tag(r(e[0],e[1],0===this.valueType?e.length>2?e[2]:t:a))}toXYZ(e,t=0){return this.tag(r(e[0],e[1],0===this.valueType?e[2]:t))}}class d{constructor(e,t){this.spatialReference=e,this._unnormalizationInfo=z(e,t)}tag(e){return e}createNew(){return this.tag(h())}fromPoint(e){return this.tag(p(e.x,e.y,e.z,e.m))}fromArray(e){return this.tag(p(e[0],e[1],e[2]||0,e[3]||0))}toArray(e){return[e[0],e[1],e[2],e[3]]}clone(e){return this.tag(l(e))}toPoint(e,t){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}createPoint(e){return new t({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}createPointFromArray(e){return new t({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}createDehydratedPoint(e){return{x:e[0],y:e[1],z:e[2],m:e[3],hasZ:!0,hasM:!0,spatialReference:this.spatialReference,type:"point"}}lerp(e,t,r,a){return f(a,e,t,r)}addDelta(e,t,r,a){e[0]+=t,e[1]+=r,e[2]+=a}pointToArray(e){return[e.x,e.y,e.z,e.m]}zFromArray(e){return e[2]}hasZ(){return!0}unnormalize(e){R(e,this._unnormalizationInfo)}fromXYZ(e,t=0,r=0){return this.tag(p(e[0],e[1],e.length>2?e[2]:t,r))}toXYZ(e){return r(e[0],e[1],e[2])}}function v(e,t,r,a){return e&&t?new d(r,a):t?new y(1,r,a):e?new y(0,r,a):new m(r,a)}function R(e,t){if(!t.supported)return;let r=1/0,a=-1/0;const n=t.upperBoundX-t.lowerBoundX;e.forEach((e=>{let i=e.pos[0];for(;i<t.lowerBoundX;)i+=n;for(;i>t.upperBoundX;)i-=n;r=Math.min(r,i),a=Math.max(a,i),e.pos[0]=i}));const i=a-r;n-i<i&&e.forEach((e=>{e.pos[0]<0&&(e.pos[0]+=n)}))}function z(t,r){const a=e(t);return"global"===r&&a?{supported:!0,lowerBoundX:a.valid[0],upperBoundX:a.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}export{m as CoordinateHelper2D,y as CoordinateHelper3D,d as CoordinateHelper4D,v as createCoordinateHelper};
