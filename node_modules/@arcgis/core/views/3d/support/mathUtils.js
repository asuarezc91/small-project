/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{asinClamped as t,acosClamped as n,clamp as i}from"../../../core/mathUtils.js";import{c as o}from"../../../chunks/vec3f64.js";import{s as r,d as s,n as a,c,l as h,a as e,b as u,e as f,f as m}from"../../../chunks/vec3.js";function M(t,n){return t>n?Math.cos(n):Math.cos(t)}function l(t,n,i){return 2*Math.atan(i*Math.tan(.5*t)/n)}function d(t,n,i){return 2*Math.atan(n*Math.tan(.5*t)/i)}function z(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],o=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(Math.max(n,i),o))}function b(t,n){const i=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),o=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),s=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return r(t,i,o,s),t}function g(t,n,i){i=i||t;const o=s(t,n);r(i,t[0]-o*n[0],t[1]-o*n[1],t[2]-o*n[2]),a(i,i)}function x(t,n,i){Math.abs(t[0])>Math.abs(t[1])?r(n,0,1,0):r(n,1,0,0),c(i,t,n),a(n,n),c(n,i,t),a(i,i)}function p(t,n){return(t%n+n)%n}function q(n,i){const o=h(n),s=t(n[2]/o),a=Math.atan2(n[1]/o,n[0]/o);return r(i,o,s,a),i}function j(t,n){const i=t[0],o=t[1],s=t[2],a=Math.cos(o);r(n,i*a*Math.cos(s),i*a*Math.sin(s),i*Math.sin(o))}function w(t,n,i){const o=i[0]-n[0],r=i[1]-n[1],s=i[2]-n[2];let a=o*o+r*r+s*s;return a?(a=1/Math.sqrt(a),t[0]=o*a,t[1]=r*a,t[2]=s*a,t):(t[0]=0,t[1]=0,t[2]=0,t)}function I(t,n,i,o,r,s){const a=t+(n-t)*r;return a+(i+(o-i)*r-a)*s}function P(t,n,i,r=o()){const a=h(t),c=h(n),m=s(t,n)/(a*c);if(m<.9999999999999999){const o=Math.acos(m),s=((1-i)*a+i*c)/Math.sin(o),h=s/a*Math.sin((1-i)*o),f=s/c*Math.sin(i*o);return e(E,t,h),e(G,n,f),u(r,E,G)}return f(r,t,n,i)}function _(t,i,o){t=a(E,t),i=a(G,i);const r=n(s(t,i));if(o){const n=c(C,t,i);if(s(n,o)<0)return-r}return r}function k(t){const n=t.length;return function(i){if(i<=t[0][0])return t[0][1];if(i>=t[n-1][0])return t[n-1][1];let o=1;for(;i>t[o][0];)o++;const r=t[o-1][0],s=t[o][0],a=(s-i)/(s-r);return a*t[o-1][1]+(1-a)*t[o][1]}}class v{constructor(t,n){this.min=t,this.max=n,this.range=n-t}ndiff(t,n=0){return Math.ceil((t-n)/this.range)*this.range+n}_normalize(t,n,i,o=0,r=!1){return(i-=o)<t?i+=this.ndiff(t-i):i>n&&(i-=this.ndiff(i-n)),r&&i===n&&(i=t),i+o}normalize(t,n=0,i=!1){return this._normalize(this.min,this.max,t,n,i)}clamp(t,n=0){return i(t-n,this.min,this.max)+n}monotonic(t,n,i){return t<n?n:n+this.ndiff(t-n,i)}minimalMonotonic(t,n,i){return this._normalize(t,t+this.range,n,i)}center(t,n,i){return n=this.monotonic(t,n,i),this.normalize((t+n)/2,i)}diff(t,n,i){return this.monotonic(t,n,i)-t}shortestSignedDiff(t,n){t=this.normalize(t);const i=(n=this.normalize(n))-t,o=n<t?this.minimalMonotonic(t,n)-t:n-this.minimalMonotonic(n,t);return Math.abs(i)<Math.abs(o)?i:o}contains(t,n,i){return n=this.minimalMonotonic(t,n),(i=this.minimalMonotonic(t,i))>t&&i<n}}function D(t,n,i,o){m(F,n,t),m(S,i,t),c(o,F,S),a(o,o),o[3]=-s(t,o)}const F=o(),S=o();function U(t){for(const n in t){const i=t[n];i instanceof Function&&(t[n]=i.bind(t))}return t}const y=U(new v(0,2*Math.PI)),A=U(new v(-Math.PI,Math.PI)),B=U(new v(0,360)),C=o(),E=o(),G=o();export{v as Cyclical,_ as angle,I as bilerp,q as cartesianToSpherical,M as cosCapped,y as cyclical2PI,B as cyclicalDeg,A as cyclicalPI,w as directionFromTo,l as fovx2fovy,d as fovy2fovx,g as makeOrthonormal,k as makePiecewiseLinearFunction,z as maxScale,p as moduloPositive,D as planeFromPoints,b as scaleFromMatrix,P as slerp,j as sphericalToCartesian,x as tangentFrame};
