/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{lerp as t}from"../../../core/mathUtils.js";import{wrap as e}from"../../../geometry/support/aaBoundingBox.js";import{frustum as s}from"../support/geometryUtils.js";import{createPlanarGlobePatch as i}from"./PatchGeometryFactory.js";import n from"./Tile.js";class r extends n{constructor(t,e,s){super(r.NumSubdivisionsAtLevel),void 0!==t&&this.init(t,e,s)}init(e,s,i){super.init(e,s,i),this._edgeLen=this.extent[2]-this.extent[0],this._edgeLen2=this._edgeLen*this._edgeLen,this.centerAtSeaLevel[0]=t(this.extent[0],this.extent[2],.5),this.centerAtSeaLevel[1]=t(this.extent[1],this.extent[3],.5),this.centerAtSeaLevel[2]=0,this.updateRadiusAndCenter()}updateRadiusAndCenter(){this._updateCenter();const t=(this.extent[2]-this.extent[0])*Math.SQRT1_2,e=.5*(this.elevationBounds[0]-this.elevationBounds[1]);this._radius=Math.sqrt(t*t+e*e)}_isVisible(){return this.intersectsClippingArea&&s.intersectsAABB(this.surface.frustum.planes,e(this.extent[0],this.extent[1],this.elevationBounds[0],this.extent[2],this.extent[3],this.elevationBounds[1]))}createGeometry(t,e){i(t,this.extent,e,this.renderData),this.setMemoryDirty()}}r.NumSubdivisionsAtLevel=[2,2,2,2,2,2,2,2];export{r as PlanarPatch};
