/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{c as e}from"../../../../chunks/vec3f64.js";import{l as t,f as r,b as n,a as s}from"../../../../chunks/vec3.js";import{surfaceElevationBelowRenderLocation as o}from"../intersectionUtils.js";function i(e,i,l=0){const a=e.state.constraints;if(!a.collision.enabled)return!1;const f=o(e,i.eye),u=e.renderCoordsHelper.getAltitude(i.eye),d=f+a.collision.elevationMargin;if(u>=d)return!1;const m=t(i.eye);if(r(c,i.center,i.eye),e.renderCoordsHelper.setAltitude(d,i.eye),1===l)n(i.center,i.eye,c);else if(2===l){const e=(m-u+d)/m;s(i.center,i.center,e)}return i.markViewDirty(),!0}const c=e();export{i as applySurfaceCollisionConstraint};
