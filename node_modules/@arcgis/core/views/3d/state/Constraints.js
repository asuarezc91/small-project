/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import"../../../core/has.js";import e from"../../../core/Logger.js";import"../../../core/accessorSupport/ensureType.js";import{property as i}from"../../../core/accessorSupport/decorators/property.js";import{subclass as o}from"../../../core/accessorSupport/decorators/subclass.js";import"../../../core/urlUtils.js";import"../../../core/uuid.js";import"../../../portal/support/resourceExtension.js";import s from"../../../core/Accessor.js";import{earth as r}from"../../../geometry/support/Ellipsoid.js";import{clamp as a,deg2rad as n}from"../../../core/mathUtils.js";import{makePiecewiseLinearFunction as l}from"../support/mathUtils.js";const m=e.getLogger("esri.views.3d.state.Constraints");let c=class extends s{constructor(t){super(t),this.collision=new h,this.distance=1/0,this.minimumPoiDistance=4}get altitude(){return 2===this.mode?null:this._get("altitude")||null}set altitude(t){2!==this.mode?this._set("altitude",t):m.warn("Altitude constraint is ignored in local scenes")}clampAltitude(t){return this.altitude?a(t,this.altitude.min,this.altitude.max):t}clampTilt(t,e){if(!this.tilt)return e;const i=this.tilt(t);return a(e,i.min,i.max)}clampDistance(t){return Math.min(t,this.distance)}createDefaultTilt(){return 2===this.mode?this.createDefaultTiltLocal():this.createDefaultTiltGlobal()}createConstantMaxTilt(t){return(e,i=d)=>(i.min=u.min,i.max=t,i)}createDefaultTiltLocal(){const t=this.collision.enabled?l([[4e3,u.max],[1e4,n(88)],[6e6,n(88)]]):()=>u.max;return(e,i=d)=>(i.min=u.min,i.max=t(e),i)}createDefaultTiltGlobal(){const t=this.collision.enabled?l([[4e3,u.max],[5e4,n(88)],[6e6,n(88)],[2e7,u.min]]):l([[3e5,u.max],[3e6,n(88)],[6e6,n(88)],[2e7,u.min]]);return(e,i=d)=>(i.min=u.min,i.max=t(e),i)}};t([i()],c.prototype,"altitude",null),t([i({readOnly:!0})],c.prototype,"collision",void 0),t([i()],c.prototype,"distance",void 0),t([i({readOnly:!0})],c.prototype,"minimumPoiDistance",void 0),t([i()],c.prototype,"tilt",void 0),t([i({constructOnly:!0})],c.prototype,"mode",void 0),c=t([o("esri.views.3d.state.Constraints")],c);const p={min:-2e5,max:4*r.radius};const u={min:n(.5),max:n(179.5)},d={min:0,max:0};let h=class extends s{constructor(){super(...arguments),this.enabled=!0,this.elevationMargin=5}};t([i({type:Boolean})],h.prototype,"enabled",void 0),t([i({type:Number})],h.prototype,"elevationMargin",void 0),h=t([o("esri.views.3d.state.Constraints.CollisionConstraint")],h);var x=c;export default x;export{c as Constraints,u as TiltDefault,p as earthAltitudeConstraint};
