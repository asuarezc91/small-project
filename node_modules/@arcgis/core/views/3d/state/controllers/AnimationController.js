/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as t}from"../../../../chunks/tslib.es6.js";import"../../../../core/has.js";import{isSome as s}from"../../../../core/maybe.js";import"../../../../core/Logger.js";import"../../../../core/accessorSupport/ensureType.js";import"../../../../core/accessorSupport/decorators/property.js";import{subclass as i}from"../../../../core/accessorSupport/decorators/subclass.js";import"../../../../core/urlUtils.js";import"../../../../core/uuid.js";import"../../../../portal/support/resourceExtension.js";import{createAbortError as e}from"../../../../core/promiseUtils.js";import o from"../../../ViewAnimation.js";import{CameraController as r,State as n}from"./CameraController.js";let a=class extends r{get canStop(){return!0}set asyncResult(t){this._asyncResult&&(this._asyncResult.reject(e()),this._asyncResult=null),this.state===n.Finished||this.state===n.Stopped?this.state===n.Finished?t.resolve():t.reject(e()):this._asyncResult=t}get asyncResult(){return this._asyncResult}onControllerStart(){this.state=n.Running,s(this.viewAnimation)&&this.viewAnimation.when((()=>this.updateStateFromViewAnimation()),(()=>this.updateStateFromViewAnimation()))}updateStateFromViewAnimation(){!s(this.viewAnimation)||this.state!==n.Ready&&this.state!==n.Running||(this.viewAnimation.state===o.State.FINISHED?this.finish():this.viewAnimation.state===o.State.STOPPED&&(this.state=n.Stopped))}onControllerEnd(){s(this.viewAnimation)&&!this.viewAnimation.done&&(this.state===n.Finished?this.viewAnimation.finish():this.state===n.Stopped&&this.viewAnimation.stop()),this._asyncResult&&(this.state===n.Finished?this._asyncResult.resolve():this._asyncResult.reject(e()))}finish(){this.finishController()}};a=t([i("esri.views.3d.state.controllers.AnimationController")],a);export{a as AnimationController};
