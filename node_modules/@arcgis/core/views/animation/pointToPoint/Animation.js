/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{inOutCoastQuad as t,outExpo as i}from"../easing.js";import{defaultSettings as n}from"./Settings.js";import{Definition as e}from"./Definition.js";import{Path as a}from"./apex/Path.js";const s={zoom:0,pan:0,rotate:0};class o{constructor(t){this.createCamera=t,this.time=0,this.definition=new e(t),this.path=new a}update(t,i,n){this.definition.update(t,i,n),this.path.update(this.definition,n),this.time=this._applyTimeSettings(this.path.time,n),this.settings=n}cameraAt(n,e){e=e||this.createCamera(),n=Math.min(Math.max(0,n),1),n=this.settings.easing?this.normalizedEasing(this.settings.easing,n):this.time>=1?this.normalizedEasing(t,n):this.normalizedEasing(i,n);const a=this.path.interpolateComponentsAt(n,s);return e.interpolate(this.definition.source,this.definition.target,a),e}normalizedEasing(t,i){const n=t(0),e=t(1);return(t(i)-n)/(e-n)}_applyTimeSettings(t,i){const e=null!=i.speedFactor?i.speedFactor:1;null!=i.duration?t=i.duration:null!=i.speedFactor&&(t/=e);const a=null!=i.minDuration?i.minDuration:n.minDuration/e,s=null!=i.maxDuration?i.maxDuration:n.maxDuration/e;return t=Math.min(Math.max(a,t),s)}}export default o;export{o as Animation};
