/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{isSome as t}from"../../core/maybe.js";import a from"../../core/Error.js";import{numericTypes as r}from"../../layers/support/fieldUtils.js";import{getFieldsList as s}from"../support/utils.js";import{verifyBasicFieldValidity as i,verifyFieldType as e}from"./support/utils.js";import{createLayerAdapter as o,getLayerTypeLabels as l}from"../support/adapters/support/layerUtils.js";const p=r;async function n(r){const{layerAdapter:n,...m}=await async function(r){if(!(r&&r.layer&&r.view))throw new a("heatmap-statistics:missing-parameters","'layer' and 'view' parameters are required");const n=[0,2,1],{layer:m,...u}=r,f=o(m,n),c={layerAdapter:f,...u};if(c.blurRadius=null==c.blurRadius?10:c.blurRadius,!f)throw new a("heatmap-statistics:invalid-parameters","'layer' must be one of these types: "+l(n).join(", "));const d=t(c.signal)?{signal:c.signal}:null;await f.load(d);const y=c.field,w=y?f.getField(y):null,h=await s({field:y}),j=i(f,h,"heatmap-statistics:invalid-parameters");if(j)throw j;if(w){const t=e(f,w,"heatmap-statistics:invalid-parameters",p);if(t)throw t}return c}(r);return n.heatmapStatistics(m)}export default n;
