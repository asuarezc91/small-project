/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{isSome as r}from"../../core/maybe.js";import e from"../../core/Error.js";import{all as t}from"../../core/promiseUtils.js";import{verifyBasicFieldValidity as a}from"./support/utils.js";import{createLayerAdapter as i,getLayerTypeLabels as o}from"../support/adapters/support/layerUtils.js";async function s(s){const{layerAdapter:n,...p}=await async function(s){if(!(s&&s.layer&&s.view&&s.fields))throw new e("predominant-categories:missing-parameters","'layer', 'view' and 'fields' parameters are required");const n=[0,2,1,3,4],{layer:p,...l}=s,m=i(p,n),d={layerAdapter:m,...l};if(!m)throw new e("predominant-categories:invalid-parameters","'layer' must be one of these types: "+o(n).join(", "));const f=r(d.signal)?{signal:d.signal}:null;await t([d.view.when(),m.load(f)]);const c=a(m,d.fields,"predominant-categories:invalid-parameters");if(c)throw c;return d}(s);return n.predominantCategories(p)}export default s;
