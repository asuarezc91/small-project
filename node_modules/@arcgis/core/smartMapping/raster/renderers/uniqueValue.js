/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{isSome as e}from"../../../core/maybe.js";import r from"../../../core/Error.js";import{createUVRenderer as t,getClassField as a}from"../../../renderers/support/rasterRendererHelper.js";import{processRasterRendererParameters as s}from"../support/utils.js";async function o(o){o=await async function(e){var t;e=await s(e);const{rasterInfo:o}=e.layer;if(o.bandCount>1)throw new r("raster-class-breaks-renderer:not-supported","Multiband raster is not supported");if(null===o.attributeTable)throw new r("raster-unique-value-renderer:not-supported","The source raster does not have an attribute table");const n=null==(t=e.classFieldName)?void 0:t.toLowerCase();if(n&&!o.attributeTable.fields.some((e=>e.name.toLowerCase()===n)))throw new r("raster-unique-value-renderer:invalid-parameters","A valid 'classfieldName' is required");return n||(e.classFieldName=a(o.attributeTable).name),e}(o);const{classFieldName:n}=o,i=t(o.layer.rasterInfo,n);if(!e(i))throw new r("raster-unique-value-renderer:not-supported","UniqueValueRenderer is not supported on the provided data source");return{renderer:i,classFieldName:n}}export{o as createRenderer};
