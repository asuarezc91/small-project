/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import e from"../../core/Error.js";import{all as r}from"../../core/promiseUtils.js";import s from"../../PopupTemplate.js";import{fetchMessageBundle as a}from"../../intl/messages.js";import{getContentFromFieldInfos as n,hasNormalizedField as t,getFieldAndExpressionInfos as o}from"./support/utils.js";async function i(r){const{layer:s,renderer:a}=r;await s.load();const n=a||s.renderer;if("class-breaks"!==n.type)throw new e("class-breaks-popup:invalid-parameters","renderer.type must be 'class-breaks'");return{layer:s,renderer:n}}async function p(e,r,a="divide"){const{fieldInfos:t,expressionInfos:i}=await o({renderer:e,layer:r,normFieldExpressionTemplate:a});return new s({content:await n(r,{fieldInfos:t,expressionInfos:i}),fieldInfos:t,expressionInfos:i})}async function l(e){const[{renderer:s,layer:n},o]=await r([i(e),a("esri/smartMapping/t9n/smartMapping")]),l={name:"class-breaks",title:o.classBreaks,value:await p(s,n)},m=[];return t(s)&&m.push({name:"class-breaks-percent",title:o.classBreaksNormFieldAsPercent,value:await p(s,n,"percentage")}),{primaryTemplate:l,secondaryTemplates:m}}export{l as getTemplates};
