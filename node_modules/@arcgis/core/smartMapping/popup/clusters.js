/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{isSome as r}from"../../core/maybe.js";import e from"../../core/Error.js";import{all as t}from"../../core/promiseUtils.js";import{fetchMessageBundle as s}from"../../intl/messages.js";import{isClusterCompatibleRenderer as a}from"../../views/2d/layers/support/clusterUtils.js";import{createPopupTemplate as o}from"./support/clusterUtils.js";async function i(r){const{layer:t,renderer:s}=r;await t.load();const o=s||t.renderer;if(!a(o))throw new e("clusters-popup:invalid-parameters","'renderer' is not valid");return{layer:t,renderer:o}}async function l(e){const[{renderer:a,layer:l},n]=await t([i(e),s("esri/smartMapping/t9n/smartMapping")]),p=await o(l,a);let m=null;return r(p)?(m={name:"clusters",title:n.clusters.templateTitle,value:p},{primaryTemplate:m,secondaryTemplates:[]}):null}export{l as getTemplates};
