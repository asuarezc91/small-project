/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import e from"../../core/Error.js";import{all as r}from"../../core/promiseUtils.js";import t from"../../PopupTemplate.js";import{fetchMessageBundle as a}from"../../intl/messages.js";import{getFieldAndExpressionInfos as n,getContentFromFieldInfos as o}from"./support/utils.js";async function p(r){const{layer:t,renderer:a}=r;await t.load();const n=a||t.renderer;if("heatmap"!==n.type)throw new e("heatmap-popup:invalid-parameters","renderer.type must be 'heatmap'");return{layer:t,renderer:n}}async function i(e){const[{renderer:i,layer:s},m]=await r([p(e),a("esri/smartMapping/t9n/smartMapping")]);if(!i.field)return null;const{fieldInfos:l}=await n({renderer:i,layer:s}),f=new t({content:await o(s,{fieldInfos:l}),fieldInfos:l});return{primaryTemplate:{name:"heatmap",title:m.heatmap,value:f},secondaryTemplates:[]}}export{i as getTemplates};
