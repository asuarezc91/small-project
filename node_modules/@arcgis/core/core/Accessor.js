/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import t from"./Logger.js";import{get as r}from"./accessorSupport/get.js";import{getOwnClassMetadata as e}from"./accessorSupport/metadata.js";import{set as s}from"./accessorSupport/set.js";import{property as o}from"./accessorSupport/decorators/property.js";import{deprecatedFunction as c}from"./deprecate.js";import{subclass as i}from"./accessorSupport/decorators/subclass.js";import n from"./accessorSupport/Properties.js";import{removeTarget as a,watch as _}from"./accessorSupport/watch.js";function u(t){if(null==t)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor&&t.constructor.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}class p{constructor(...t){if(this.constructor===p)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new n(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:s,constructor:c}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class a extends n{constructor(...t){super(...t),this.inherited=null,c&&c.apply(this,t)}}e(a.prototype);for(const r in t){const e=t[r];a.prototype[r]="function"==typeof e?function(...t){const s=this.inherited;let o;this.inherited=function(...t){if(n.prototype[r])return n.prototype[r].apply(this,t)};try{o=e.apply(this,t)}catch(t){throw this.inherited=s,t}return this.inherited=s,o}:t[r]}for(const t in r){const e=u(r[t]);o(e)(a.prototype,t)}return i(s)(a)}postscript(t){const r=this.__accessor__,e=r.ctorArgs||t;r.initialize(),e&&(this.set(e),r.ctorArgs=null),r.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(a(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}get(t){return r(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}isInstanceOf(r){return c(t.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof r}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return s(this,t,r),this}watch(t,r,e){return _(this,t,r,e)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,r){return this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.propertyInvalidated(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}}export default p;
