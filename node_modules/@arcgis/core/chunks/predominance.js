/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import e from"../Color.js";import{createThemes as o,getThemesforBasemap as a,getRawSchemes as n,filterSchemesByName as r,filterSchemesByTag as t}from"../smartMapping/symbology/support/symbologyUtils.js";import{toWorldScale as i}from"../smartMapping/symbology/support/utils.js";import m from"../smartMapping/symbology/support/colors.js";import{g as c,c as p}from"./size.js";const s={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},l=o({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features by their predominant category.",schemes:{point:{light:{common:{noDataColor:"#aaaaaa",outline:s.light,size:"8px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]},dark:{common:{noDataColor:"#aaaaaa",outline:s.darker,size:"8px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]}},polyline:{light:{common:{noDataColor:"#aaaaaa",width:"2px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]},dark:{common:{noDataColor:"#aaaaaa",width:"2px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]}},polygon:{light:{common:{noDataColor:"#aaaaaa",outline:s.light,fillOpacity:.8,markerSize:"8px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]},dark:{common:{noDataColor:"#aaaaaa",outline:s.dark,fillOpacity:.8,markerSize:"8px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]}}}}}});function d(e){return a(l,e)}function u(e){const o=n({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:l.get("default")});if(!o)return;const{schemesInfo:a,basemapId:r,basemapTheme:t}=o,i=a.common,m=c({basemap:e.basemap,geometryType:e.geometryType,worldScale:e.worldScale,view:e.view}),p=m&&m.primaryScheme;return{primaryScheme:w(e,a.primary,i,p),secondarySchemes:a.secondary.map((o=>w(e,o,i,p))).filter(Boolean),basemapId:r,basemapTheme:t}}function y(e){return r(e.name,u(e))}function h(e){return t(e.includedTags,e.excludedTags,u(e))}function g(o){if(!o)return;const a={...o};return a.colors=a.colors.map((o=>new e(o))),a.noDataColor&&(a.noDataColor=new e(a.noDataColor)),"outline"in a&&a.outline&&(a.outline={color:a.outline.color&&new e(a.outline.color),width:a.outline.width}),"sizeScheme"in a&&a.sizeScheme&&(a.sizeScheme=p(a.sizeScheme)),a}function w(o,a,n,r){const t=m[a];if(!t)return;const c=t[o.numColors]||t.stops,p="mesh"!==o.geometryType&&o.worldScale?o.view:null;switch(o.geometryType){case"point":case"multipoint":{const o=n;return function(o,a){return{name:o.name,tags:[...o.tags],colors:o.colors.map((o=>new e(o))),noDataColor:new e(o.noDataColor),outline:{color:new e(o.outline.color),width:o.outline.width},size:a?i(o.size,a):o.size,sizeScheme:o.sizeScheme,opacity:o.opacity}}({name:t.name,tags:t.tags,colors:c,noDataColor:o.noDataColor,opacity:1,sizeScheme:r,outline:o.outline,size:o.size},p)}case"polyline":{const o=n;return function(o,a){return{name:o.name,tags:[...o.tags],colors:o.colors.map((o=>new e(o))),noDataColor:new e(o.noDataColor),width:a?i(o.width,a):o.width,sizeScheme:o.sizeScheme,opacity:o.opacity}}({name:t.name,tags:t.tags,colors:c,noDataColor:o.noDataColor,opacity:1,sizeScheme:r,width:o.width},p)}case"polygon":{const o=n,a=r;a&&a.marker&&null!=o.markerSize&&(a.marker.size=o.markerSize);return function(o,a){const{sizeScheme:n}=o;return n.marker.size=a?i(n.marker.size,a):n.marker.size,{name:o.name,tags:[...o.tags],colors:o.colors.map((o=>new e(o))),noDataColor:new e(o.noDataColor),outline:{color:new e(o.outline.color),width:o.outline.width},sizeScheme:n,opacity:o.opacity}}({name:t.name,tags:t.tags,colors:c,noDataColor:o.noDataColor,opacity:o.fillOpacity,outline:o.outline,sizeScheme:a},p)}case"mesh":{const o=n,a={name:t.name,tags:t.tags,colors:c,noDataColor:o.noDataColor,opacity:o.fillOpacity};return{name:(s=a).name,tags:[...s.tags],colors:s.colors.map((o=>new e(o))),noDataColor:new e(s.noDataColor),opacity:s.opacity}}default:return}var s}var v=Object.freeze({__proto__:null,getThemes:d,getSchemes:u,getSchemeByName:y,getSchemesByTag:h,cloneScheme:g});export{d as a,y as b,g as c,h as d,u as g,v as p};
