/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{ensureOneOfType as e}from"../core/accessorSupport/ensureType.js";import{createTypeReader as s}from"../core/accessorSupport/extensions/serializableProperty/reader.js";import o from"../core/Error.js";import r from"../symbols/Symbol.js";import l from"../symbols/CIMSymbol.js";import"../symbols/Symbol3DLayer.js";import"../symbols/ExtrudeSymbol3DLayer.js";import m from"../symbols/SimpleLineSymbol.js";import"../symbols/FillSymbol.js";import"../symbols/FillSymbol3DLayer.js";import"../symbols/Font.js";import"../symbols/IconSymbol3DLayer.js";import"../symbols/LineSymbol3DLayer.js";import"../symbols/ObjectSymbol3DLayer.js";import"../symbols/PathSymbol3DLayer.js";import"../symbols/TextSymbol3DLayer.js";import"../symbols/WaterSymbol3DLayer.js";import t from"../symbols/Symbol3D.js";import"./LineCallout3DBorder.js";import"../symbols/callouts/LineCallout3D.js";import"../symbols/support/Symbol3DVerticalOffset.js";import i from"../symbols/LabelSymbol3D.js";import y from"../symbols/LineSymbol3D.js";import"../symbols/MarkerSymbol.js";import n from"../symbols/MeshSymbol3D.js";import p from"../symbols/PictureFillSymbol.js";import b from"../symbols/PictureMarkerSymbol.js";import a from"../symbols/PointSymbol3D.js";import c from"../symbols/PolygonSymbol3D.js";import f from"../symbols/SimpleFillSymbol.js";import u from"../symbols/SimpleMarkerSymbol.js";import d from"../symbols/TextSymbol.js";import S from"../symbols/WebStyleSymbol.js";function j(e,s=!1,r=!1,l=!0){if(!e)return{symbol:null};let t;if(x(e)||e instanceof S)t=e.clone();else if("cim"===e.type)t=a.fromCIMSymbol(e);else if(e instanceof m)t=y.fromSimpleLineSymbol(e);else if(e instanceof u)t=a.fromSimpleMarkerSymbol(e);else if(e instanceof b)t=a.fromPictureMarkerSymbol(e);else if(e instanceof f)t=c.fromSimpleFillSymbol(e);else{if(!(e instanceof d))return{error:new o("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};t=l?i.fromTextSymbol(e):a.fromTextSymbol(e)}if(s&&(t.id=e.id),r&&x(t))for(let e=0;e<t.symbolLayers.length;++e)t.symbolLayers.getItemAt(e)._ignoreDrivers=!0;return{symbol:t}}function w(e,s,r,l){const m=function(e,s,r){if(!e)return null;if(r&&"web-scene"===r.origin&&!(e instanceof t)&&!(e instanceof S)){const l="cim"!==e.type?j(e):{symbol:null,error:new o("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:e})};return l.symbol?l.symbol.write(s,r):(r.messages&&r.messages.push(new o("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:l.error})),null)}if(r&&"web-map"===r.origin&&"web-style"===e.type)return r.messages&&r.messages.push(new o("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:r})),null;return e.write(s,r)}(e,{},l);m&&(s[r]=m)}function D(e,s){return M(e,null,s)}function g(e){return e instanceof r}function k(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function x(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const L={base:r,key:"type",typeMap:{"simple-fill":f,"picture-fill":p,"picture-marker":b,"simple-line":m,"simple-marker":u,text:d,"label-3d":i,"line-3d":y,"mesh-3d":n,"point-3d":a,"polygon-3d":c,"web-style":S,cim:l},errorContext:"symbol"},M=s({types:L}),h={base:r,key:"type",typeMap:{"simple-fill":f,"picture-fill":p,"picture-marker":b,"simple-line":m,"simple-marker":u,text:d,"line-3d":y,"mesh-3d":n,"point-3d":a,"polygon-3d":c,"web-style":S,cim:l},errorContext:"symbol"},C={base:r,key:"type",typeMap:{text:d,"label-3d":i},errorContext:"symbol"},P={base:r,key:"type",typeMap:{"label-3d":i,"line-3d":y,"mesh-3d":n,"point-3d":a,"polygon-3d":c,"web-style":S},errorContext:"symbol"},F={base:r,key:"type",typeMap:{"line-3d":y,"mesh-3d":n,"point-3d":a,"polygon-3d":c,"web-style":S},errorContext:"symbol"},I={base:r,key:"type",typeMap:{"label-3d":i},errorContext:"symbol"},T=e(L);export{h as a,F as b,k as c,C as d,T as e,D as f,I as g,g as h,x as i,P as j,M as r,L as s,j as t,w};
