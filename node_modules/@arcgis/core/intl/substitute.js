/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{getDeepValue as t}from"../core/object.js";import{replace as r}from"../core/string.js";import e from"../core/Logger.js";import{formatDate as n}from"./date.js";import{formatNumber as o}from"./number.js";const i=e.getLogger("esri.intl");function s(e,s,c={}){const{format:a={}}=c;return r(e,(r=>function(r,e,s){let c,a;const f=r.indexOf(":");-1===f?c=r.trim():(c=r.slice(0,f).trim(),a=r.slice(f+1).trim());if(!c)return"";const m=t(c,e);if(null==m)return"";const l=s[a]||s[c];if(l)return function(t,r){switch(r.type){case"date":return n(t,r.intlOptions);case"number":return o(t,r.intlOptions);default:return i.warn("missing format descriptor for key {key}"),u(t)}}(m,l);if(a)return function(t,r){switch(r.toLowerCase()){case"dateformat":return n(t);case"numberformat":return o(t);default:return i.warn(`inline format is unsupported since 4.12: ${r}`),/^(dateformat|datestring)/i.test(r)?n(t):/^numberformat/i.test(r)?o(t):u(t)}}(m,a);return u(m)}(r,s,a)))}function u(t){switch(typeof t){case"string":return t;case"number":return o(t);case"boolean":return""+t;default:return t instanceof Date?n(t):""}}export{s as substitute};
