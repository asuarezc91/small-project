/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as t}from"../chunks/tslib.es6.js";import"../core/has.js";import"../core/Logger.js";import{ensureType as r}from"../core/accessorSupport/ensureType.js";import{property as e}from"../core/accessorSupport/decorators/property.js";import{subclass as o}from"../core/accessorSupport/decorators/subclass.js";import s from"../core/Error.js";import"../core/urlUtils.js";import"../core/uuid.js";import"./support/resourceExtension.js";import{JSONSupport as n}from"../core/JSONSupport.js";import i from"./PortalQueryParams.js";let l=class extends n{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,r=this.thumbnail;return t&&r?this.portal._normalizeUrl(`${t}/info/${r}?f=json`):null}get url(){const t=this.get("portal.restUrl");return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal._request(this.url+"/categorySchema",t).then((r=>{const e=r.categorySchema||[];return e.some((t=>"contentCategorySetsGroupQuery.LivingAtlas"===t.source))?this._fetchCategorySchemaSet("LivingAtlas",t):e}))}fetchMembers(t){return this.portal._request(this.url+"/users",t)}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+=`&w=${t}`),r}toJSON(){throw new s("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(t,e){let o=r(i,t);return parseFloat(this.portal.currentVersion)>5?(o=o||new i,this.portal._queryPortal(`/content/groups/${this.id}/search`,o,"PortalItem",e)):(o=o?o.clone():new i,o.query="group:"+this.id+(o.query?" "+o.query:""),this.portal.queryItems(o,e))}_fetchCategorySchemaSet(t,r){return this.portal._fetchSelf(this.portal.authMode,!0,r).then((t=>{const e=t.contentCategorySetsGroupQuery;if(e){const t=new i;return t.disableExtraQuery=!0,t.num=1,t.query=e,this.portal.queryGroups(t,r)}throw new s("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((e=>{if(e.total){const o=e.results[0],s=new i;return s.num=1,s.query=`typekeywords:"${t}"`,o.queryItems(s,r)}throw new s("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((t=>{if(t.total){return t.results[0].fetchData("json",r).then((t=>{const r=t&&t.categorySchema;return r&&r.length?r:[]}))}return[]}))}};t([e()],l.prototype,"access",void 0),t([e({type:Date})],l.prototype,"created",void 0),t([e()],l.prototype,"description",void 0),t([e()],l.prototype,"id",void 0),t([e()],l.prototype,"isInvitationOnly",void 0),t([e({type:Date})],l.prototype,"modified",void 0),t([e()],l.prototype,"owner",void 0),t([e()],l.prototype,"portal",void 0),t([e()],l.prototype,"snippet",void 0),t([e()],l.prototype,"sortField",void 0),t([e()],l.prototype,"sortOrder",void 0),t([e()],l.prototype,"tags",void 0),t([e()],l.prototype,"thumbnail",void 0),t([e({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],l.prototype,"thumbnailUrl",null),t([e()],l.prototype,"title",void 0),t([e({dependsOn:["portal.restUrl"],readOnly:!0})],l.prototype,"url",null),l=t([o("esri.portal.PortalGroup")],l);var p=l;export default p;
