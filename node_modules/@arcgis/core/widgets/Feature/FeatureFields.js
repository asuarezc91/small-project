/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import"../../core/has.js";import"../../core/Logger.js";import"../../core/accessorSupport/ensureType.js";import{property as s}from"../../core/accessorSupport/decorators/property.js";import{aliasOf as r}from"../../core/accessorSupport/decorators/aliasOf.js";import{subclass as t}from"../../core/accessorSupport/decorators/subclass.js";import"../../core/urlUtils.js";import"../../core/uuid.js";import"../../portal/support/resourceExtension.js";import"../support/widgetUtils.js";import{messageBundle as o}from"../support/decorators/messageBundle.js";import{renderable as i}from"../support/decorators/renderable.js";import{j as l}from"../../chunks/index.js";import d from"../Widget.js";import a from"./FeatureFields/FeatureFieldsViewModel.js";import{autoLink as p}from"../support/uriUtils.js";const n="esri-feature-fields",u="esri-feature-fields__field-header",f="esri-feature-fields__field-data",m="esri-feature-fields__field-data--date",c="esri-widget__table";let h=class extends d{constructor(e,s){super(e,s),this.attributes=null,this.expressionInfos=null,this.fieldInfos=null,this.viewModel=new a,this.messages=null,this.messagesURIUtils=null}renderFieldInfo(e,s){const{attributes:r}=this.viewModel,t=e.fieldName,o=e.label||t,i=r?null==r[t]?"":r[t]:"",d=!(!e.format||!e.format.dateFormat),a="number"==typeof i&&!d?this._forceLTR(i):p(this.messagesURIUtils,i),n={[m]:d};return l("tr",{key:`fields-element-info-row-${t}-${s}`},l("th",{key:`fields-element-info-row-header-${t}-${s}`,class:u,innerHTML:o}),l("td",{key:`fields-element-info-row-data-${t}-${s}`,class:this.classes(f,n),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e.length?l("table",{class:c,summary:this.messages.fieldsSummary},l("tbody",null,e.map(((e,s)=>this.renderFieldInfo(e,s))))):null}render(){return l("div",{class:n},this.renderFields())}_forceLTR(e){return`&lrm;${e}`}};e([r("viewModel.attributes")],h.prototype,"attributes",void 0),e([r("viewModel.expressionInfos")],h.prototype,"expressionInfos",void 0),e([r("viewModel.fieldInfos")],h.prototype,"fieldInfos",void 0),e([s({type:a}),i(["viewModel.attributes","viewModel.formattedFieldInfos"])],h.prototype,"viewModel",void 0),e([s(),i(),o("esri/widgets/Feature/t9n/Feature")],h.prototype,"messages",void 0),e([s(),i(),o("esri/widgets/support/t9n/uriUtils")],h.prototype,"messagesURIUtils",void 0),h=e([t("esri.widgets.Feature.FeatureFields")],h);var w=h;export default w;
