/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import"../../../core/has.js";import"../../../core/Logger.js";import"../../../core/accessorSupport/ensureType.js";import{property as r}from"../../../core/accessorSupport/decorators/property.js";import{subclass as e}from"../../../core/accessorSupport/decorators/subclass.js";import"../../../core/urlUtils.js";import"../../../core/uuid.js";import"../../../portal/support/resourceExtension.js";import o from"../../../core/Accessor.js";import s from"../../../Graphic.js";import{init as i}from"../../../core/watchUtils.js";import{HandleOwnerMixin as a}from"../../../core/HandleOwner.js";import{graphicCallback as c}from"../support/featureUtils.js";let n=class extends(a(o)){constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(i(this,"creator",(t=>{this._destroyContent(),this._createContent(t)})))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:r,destroyer:e}=this;t&&(c(e,{graphic:r}).catch((()=>null)),this._set("created",null))}async _createContent(t){const{graphic:r}=this,e=c(t,{graphic:r}).catch((()=>null));this._loadingPromise=e,this.notifyChange("state");const o=await e;e===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",o))}};t([r({readOnly:!0})],n.prototype,"created",void 0),t([r()],n.prototype,"creator",void 0),t([r()],n.prototype,"destroyer",void 0),t([r({type:s})],n.prototype,"graphic",void 0),t([r({readOnly:!0})],n.prototype,"state",null),n=t([e("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],n);var p=n;export default p;
