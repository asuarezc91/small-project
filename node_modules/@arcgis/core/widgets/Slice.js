/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../core/has.js";import"../core/Logger.js";import"../core/accessorSupport/ensureType.js";import{property as s}from"../core/accessorSupport/decorators/property.js";import{aliasOf as i}from"../core/accessorSupport/decorators/aliasOf.js";import{subclass as t}from"../core/accessorSupport/decorators/subclass.js";import"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import{ignoreAbortErrors as r}from"../core/promiseUtils.js";import"./support/widgetUtils.js";import{messageBundle as l}from"./support/decorators/messageBundle.js";import{renderable as o}from"./support/decorators/renderable.js";import{j as c}from"../chunks/index.js";import d from"./Widget.js";import a from"./Slice/SliceViewModel.js";const n="esri-button esri-button--secondary",u="esri-button--disabled",p="esri-icon-close esri-slice__cross",v="esri-slice esri-widget esri-widget--panel",h="esri-slice__settings",_="esri-slice__settings-title esri-widget__heading",y="esri-slice__layer-item",m="esri-slice__container",w="esri-slice__actions",b="esri-slice__hint",x="esri-slice__hint-text",g="esri-slice__panel--error",M="esri-slice__exclude-button",f="esri-slice__cancel-button",S="esri-slice__clear-button";let j=class extends d{constructor(e,s){super(e,s),this.label=void 0,this.messages=null,this.view=null,this.viewModel=new a}render(){const e=this.viewModel.isSupported,s=this.viewModel.active,i="disabled"===this.viewModel.state,t="ready"===this.viewModel.state,r="slicing"===this.viewModel.state||"sliced"===this.viewModel.state,l="exclude"===this.viewModel.layersMode,o=[n,i&&u],{messages:d}=this,a=s&&!r||l?null:c("button",{disabled:i,class:this.classes(S,...o),bind:this,onclick:this._onNewSliceClick,key:"esri-slice__clear",type:"button"},d.newSlice),j=r&&!l?c("button",{class:this.classes(M,...o),bind:this,onclick:()=>{this.viewModel.enterExcludeLayerMode()},key:"esri-slice__exclude",type:"button"},d.excludeLayer):null,k=s&&l?c("button",{class:this.classes(f,...o),bind:this,onclick:()=>{this.viewModel.exitExcludeLayerMode()},key:"esri-slice__cancel-exclude",type:"button"},d.cancel):null;let L=null;s&&(l?L=d.excludeHint:t&&(L=d.hint));const G=L?c("div",{class:b,key:"esri-slice__hint"},c("p",{class:x},L)):null,E=this.excludedLayers?this.excludedLayers.toArray().map((e=>c("li",{class:y,key:e.uid},c("a",{href:"",onclick:()=>(this.excludedLayers.remove(e),!1),class:p,title:d.includeLayer}),e.title))):[];this.excludeGroundSurface&&E.push(c("li",{class:y,key:"ground"},c("a",{href:"",onclick:()=>(this.excludeGroundSurface=!1,!1),class:p,title:d.includeLayer}),d.ground));const U=!l&&r&&E.length>0?c("div",{class:h,key:"esri-slice__settings"},c("h3",{class:_},d.excludedLayers),c("ul",null,E)):null,A=c("div",{class:g,key:"esri-slice__unsupported"},c("p",null,d.unsupported)),C=c("div",{class:w},j,k,a),N=this.visible?c("div",{class:m},e?[G,U,C]:A):null;return c("div",{class:v,role:"presentation"},N)}_onNewSliceClick(){r(this.viewModel.removeSliceAndStart())}};e([s({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],j.prototype,"label",void 0),e([s(),o(),l("esri/widgets/Slice/t9n/Slice")],j.prototype,"messages",void 0),e([i("viewModel.view")],j.prototype,"view",void 0),e([i("viewModel.visible"),o()],j.prototype,"visible",void 0),e([i("viewModel.active"),o()],j.prototype,"active",void 0),e([s({type:a})],j.prototype,"viewModel",void 0),e([i("viewModel.excludedLayers"),o()],j.prototype,"excludedLayers",void 0),e([i("viewModel.excludeGroundSurface"),o()],j.prototype,"excludeGroundSurface",void 0),j=e([t("esri.widgets.Slice")],j);var k=j;export default k;
