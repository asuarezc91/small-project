/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as o}from"../../../chunks/tslib.es6.js";import"../../../core/has.js";import{neverReached as e}from"../../../core/compilerUtils.js";import"../../../core/Logger.js";import"../../../core/accessorSupport/ensureType.js";import{property as t}from"../../../core/accessorSupport/decorators/property.js";import{subclass as r}from"../../../core/accessorSupport/decorators/subclass.js";import"../../../core/urlUtils.js";import"../../../core/uuid.js";import"../../../portal/support/resourceExtension.js";import s from"../../../core/Evented.js";let p=class extends s.EventedAccessor{constructor(o){super(o),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw":case"draw-3d":return null;default:e(this.activeComponent)}return null}addToHistory(o){this.history.redo=[],this.history.undo.push(o)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this.reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}reset(){this.activeComponent.reset()}refreshComponent(){const o=this.activeComponent;o&&("box"!==o.type&&"reshape"!==o.type||o.refresh())}set undo(o){this._set("undo",(()=>{this.canUndo()&&o()}))}set redo(o){this._set("redo",(()=>{this.canRedo()&&o()}))}};o([t()],p.prototype,"activeComponent",void 0),o([t()],p.prototype,"cancelled",void 0),o([t()],p.prototype,"history",void 0),o([t({dependsOn:["activeComponent"]})],p.prototype,"tool",null),o([t()],p.prototype,"type",void 0),o([t()],p.prototype,"canUndo",null),o([t()],p.prototype,"canRedo",null),o([t()],p.prototype,"onEnd",void 0),o([t()],p.prototype,"undo",null),o([t()],p.prototype,"redo",null),o([t()],p.prototype,"toggleTool",void 0),o([t()],p.prototype,"addToSelection",void 0),o([t()],p.prototype,"removeFromSelection",void 0),p=o([r("esri.widgets.Sketch.support.OperationHandle")],p);export{p as OperationHandle};
