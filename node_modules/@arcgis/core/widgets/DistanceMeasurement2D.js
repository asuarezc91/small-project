/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../core/has.js";import"../core/Logger.js";import"../core/accessorSupport/ensureType.js";import{property as s}from"../core/accessorSupport/decorators/property.js";import{aliasOf as t}from"../core/accessorSupport/decorators/aliasOf.js";import{subclass as i}from"../core/accessorSupport/decorators/subclass.js";import"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import{ignoreAbortErrors as r}from"../core/promiseUtils.js";import{isMeasurementSystem as n}from"../core/unitUtils.js";import"./support/widgetUtils.js";import{accessibleHandler as a}from"./support/decorators/accessibleHandler.js";import{messageBundle as o}from"./support/decorators/messageBundle.js";import{renderable as l}from"./support/decorators/renderable.js";import{j as d}from"../chunks/index.js";import u from"./Widget.js";import m from"./DistanceMeasurement2D/DistanceMeasurement2DViewModel.js";const c="esri-button esri-button--secondary",p="esri-button--disabled",v="esri-icon-measure-line",_="esri-distance-measurement-2d",w="esri-widget",b="esri-widget--panel",h="esri-distance-measurement-2d__container",y="esri-distance-measurement-2d__hint",M="esri-distance-measurement-2d__hint-text",g="esri-distance-measurement-2d__panel--error",j="esri-distance-measurement-2d__measurement",f="esri-distance-measurement-2d__measurement-item",k="esri-distance-measurement-2d__measurement-item--disabled",U="esri-distance-measurement-2d__measurement-item-title",D="esri-distance-measurement-2d__measurement-item-value",O="esri-distance-measurement-2d__settings",x="esri-distance-measurement-2d__units",S="esri-distance-measurement-2d__units-label",L="esri-distance-measurement-2d__units-select esri-select",C="esri-distance-measurement-2d__units-select-wrapper",$="esri-distance-measurement-2d__actions",z="esri-distance-measurement-2d__clear-button";let B=class extends u{constructor(e,s){super(e,s),this.iconClass=v,this.label=void 0,this.messages=null,this.messagesUnits=null,this.unit=null,this.unitOptions=null,this.view=null,this.viewModel=new m}render(){const{id:e,messages:s,messagesUnits:t,viewModel:i,visible:r}=this,{active:a,isSupported:o,measurementLabel:l,state:u,unit:m,unitOptions:v}=i,B="disabled"===u,E="measuring"===u||"measured"===u,H=a&&"ready"===u?d("section",{key:"hint",class:y},d("p",{class:M},s.hint)):null,I=o?null:d("section",{key:"unsupported",class:g},d("p",null,s.unsupported)),T=E?d("section",{key:"measurement",class:j},((e,s,t)=>s?d("div",{key:`${t}-enabled`,class:f},d("span",{class:U},e),d("span",{class:D},s)):d("div",{key:`${t}-disabled`,class:this.classes(f,k),"aria-disabled":"true"},d("span",{class:U},e)))(s.distance,l,"distance")):null,V=`${e}-units`,W=E?d("section",{key:"units",class:x},d("label",{class:S,for:V},s.unit),d("div",{class:C},d("select",{class:L,id:V,onchange:this._changeUnit,bind:this,value:m},v.map((e=>{var s;return d("option",{key:e,value:e},n(e)?t.systems[e]:null==(s=t.units[e])?void 0:s.pluralCapitalized)}))))):null,q=E?d("div",{key:"settings",class:O},W):null,A=!o||a&&!E?null:d("div",{class:$},d("button",{disabled:B,class:this.classes(c,z,B&&p),bind:this,onclick:this._newMeasurement,title:s.newMeasurement,"aria-label":s.newMeasurement,type:"button"},s.newMeasurement)),F=r?d("div",{class:h},I,H,q,T,A):null;return d("div",{class:this.classes(_,w,b)},F)}_newMeasurement(){r(this.viewModel.start())}_changeUnit(e){const s=e.target,t=s.options[s.selectedIndex];t&&(this.viewModel.unit=t.value)}};e([t("viewModel.active"),l()],B.prototype,"active",void 0),e([s()],B.prototype,"iconClass",void 0),e([s({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],B.prototype,"label",void 0),e([s(),l(),o("esri/widgets/DistanceMeasurement2D/t9n/DistanceMeasurement2D")],B.prototype,"messages",void 0),e([s(),l(),o("esri/core/t9n/Units")],B.prototype,"messagesUnits",void 0),e([t("viewModel.unit")],B.prototype,"unit",void 0),e([t("viewModel.unitOptions")],B.prototype,"unitOptions",void 0),e([t("viewModel.view")],B.prototype,"view",void 0),e([s({type:m}),l(["viewModel.state","viewModel.unitOptions","viewModel.unit","viewModel.measurementLabel"])],B.prototype,"viewModel",void 0),e([t("viewModel.visible"),l()],B.prototype,"visible",void 0),e([a()],B.prototype,"_newMeasurement",null),e([a()],B.prototype,"_changeUnit",null),B=e([i("esri.widgets.DistanceMeasurement2D")],B);var E=B;export default E;
