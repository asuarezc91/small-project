/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as i}from"../../../chunks/tslib.es6.js";import"../../../core/has.js";import"../../../core/Logger.js";import"../../../core/accessorSupport/ensureType.js";import{property as e}from"../../../core/accessorSupport/decorators/property.js";import{subclass as s}from"../../../core/accessorSupport/decorators/subclass.js";import"../../../core/urlUtils.js";import"../../../core/uuid.js";import"../../../portal/support/resourceExtension.js";import{on as t,init as o}from"../../../core/watchUtils.js";import"../../support/widgetUtils.js";import{renderable as r}from"../../support/decorators/renderable.js";import{j as d}from"../../../chunks/index.js";import l from"../../Widget.js";import p from"../BuildingDisciplinesViewModel.js";import h from"./BuildingDisciplinesNode.js";const a={expand:"expand",collapse:"collapse",hideSublayer:"hideSublayer",showSublayer:"showSublayer"},g={base:"esri-building-disciplines-tree"};let c=class extends l{constructor(i){super(i),this._defaultViewModel=new p,this.viewModel=this._defaultViewModel,this.messages=a,this.toggleSiblingsVisibility=!1,this._childWidgets=[],this._updateChildWidgets=()=>{this._destroyChildWidgets(),this.viewModel&&(this._childWidgets=this.viewModel.root.children.toArray().reverse().map((i=>new h({node:i,messages:this.messages,toggleSiblingsVisibility:this.toggleSiblingsVisibility}))))}}initialize(){this.own(t(this,"viewModel.root.children","after-changes",this._updateChildWidgets,this._updateChildWidgets,this._updateChildWidgets),o(this,["messages","toggleSiblingsVisibility"],this._updateChildWidgets))}destroy(){this._destroyChildWidgets(),this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()}render(){return d("div",{role:"tree",class:g.base},this._childWidgets.map((i=>i.render())))}_destroyChildWidgets(){this._childWidgets.forEach((i=>i.destroy())),this._childWidgets=[]}};i([e({type:p}),r()],c.prototype,"viewModel",void 0),i([e(),r()],c.prototype,"messages",void 0),i([e({nonNullable:!0}),r()],c.prototype,"toggleSiblingsVisibility",void 0),i([e(),r()],c.prototype,"_childWidgets",void 0),c=i([s("esri.widgets.BuildingExplorer.BuildingDisciplinesTree.BuildingDisciplinesTree")],c);var n=c;export default n;
