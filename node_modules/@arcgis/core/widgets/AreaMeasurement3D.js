/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../core/has.js";import"../core/Logger.js";import"../core/accessorSupport/ensureType.js";import{property as s}from"../core/accessorSupport/decorators/property.js";import{aliasOf as t}from"../core/accessorSupport/decorators/aliasOf.js";import{subclass as r}from"../core/accessorSupport/decorators/subclass.js";import"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import{ignoreAbortErrors as i}from"../core/promiseUtils.js";import{isMeasurementSystem as a}from"../core/unitUtils.js";import"./support/widgetUtils.js";import{accessibleHandler as n}from"./support/decorators/accessibleHandler.js";import{messageBundle as o}from"./support/decorators/messageBundle.js";import{renderable as l}from"./support/decorators/renderable.js";import{j as u}from"../chunks/index.js";import m from"./Widget.js";import d from"./AreaMeasurement3D/AreaMeasurement3DViewModel.js";const p="esri-button esri-button--secondary",c="esri-button--disabled",v="esri-area-measurement-3d",_="esri-widget",h="esri-widget--panel",b="esri-area-measurement-3d__container",w="esri-area-measurement-3d__hint",y="esri-area-measurement-3d__hint-text",g="esri-area-measurement-3d__panel--error",M="esri-area-measurement-3d__measurement",j="esri-area-measurement-3d__measurement-item",f="esri-area-measurement-3d__measurement-item--disabled",k="esri-area-measurement-3d__measurement-item-title",U="esri-area-measurement-3d__measurement-item-value",x="esri-area-measurement-3d__settings",O="esri-area-measurement-3d__units",A="esri-area-measurement-3d__units-label",D="esri-area-measurement-3d__units-select esri-select",S="esri-area-measurement-3d__units-select-wrapper",L="esri-area-measurement-3d__actions",$="esri-area-measurement-3d__clear-button",C="esri-icon-measure-area";let z=class extends m{constructor(e,s){super(e,s),this.view=null,this.visible=null,this.iconClass=C,this.label=void 0,this.messages=null,this.messagesUnits=null,this.viewModel=new d,this.unitOptions=null,this.unit=null}render(){const{isSupported:e,active:s,measurement:t,state:r,unit:i}=this.viewModel,n="disabled"===r,o="ready"===r,l="measuring"===r||"measured"===r,{messages:m,messagesUnits:d}=this,C=s&&o?u("section",{key:"esri-area-measurement-3d__hint",class:w},u("p",{class:y},m.hint)):null,z=e?null:u("section",{key:"esri-area-measurement-3d__unsupported",class:g},u("p",null,m.unsupported)),B=(e,s,t)=>{switch(s.state){case"available":return u("div",{key:`${t}-enabled`,class:j},u("span",{class:k},e),u("span",{class:U},s.text));case"unavailable":return u("div",{key:`${t}-disabled`,class:this.classes(j,f)},u("span",{class:k},e));case"invalid":return u("div",{key:`${t}-enabled`,class:j},u("span",{class:k},e),u("span",{class:U},m.notApplicable))}},E=l?u("section",{key:"esri-area-measurement-3d__measurement",class:M},B(m.area,t.area,"area"),B(m.perimeterLength,t.perimeterLength,"perimeter-length")):null,H=`${this.id}__units`,I=u("label",{class:A,for:H},m.unit),T=u("div",{class:S},u("select",{class:D,id:H,onchange:this._changeUnit,bind:this,value:i},this.viewModel.unitOptions.map((e=>{var s;return u("option",{key:e,value:e},a(e)?d.systems[e]:null==(s=d.units[e])?void 0:s.pluralCapitalized)})))),V=l?u("section",{key:"esri-area-measurement-3d__units",class:O},I,T):null,W=l?u("div",{key:"settings",class:x},V):null,q=!e||s&&!l?null:u("div",{class:L},u("button",{disabled:n,class:this.classes(p,$,n&&c),bind:this,onclick:this._newMeasurement,type:"button"},m.newMeasurement)),F=this.visible?u("div",{class:b},z,C,W,E,q):null;return u("div",{key:"",class:this.classes(v,_,h),role:"presentation"},F)}_newMeasurement(){i(this.viewModel.start())}_changeUnit(e){const s=e.target,t=s.options[s.selectedIndex];t&&(this.unit=t.value)}};e([t("viewModel.view")],z.prototype,"view",void 0),e([t("viewModel.visible"),l()],z.prototype,"visible",void 0),e([t("viewModel.active"),l()],z.prototype,"active",void 0),e([s()],z.prototype,"iconClass",void 0),e([s({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],z.prototype,"label",void 0),e([s(),l(),o("esri/widgets/AreaMeasurement3D/t9n/AreaMeasurement3D")],z.prototype,"messages",void 0),e([s(),l(),o("esri/core/t9n/Units")],z.prototype,"messagesUnits",void 0),e([s({type:d}),l(["viewModel.state","viewModel.unitOptions","viewModel.unit","viewModel.measurement"])],z.prototype,"viewModel",void 0),e([t("viewModel.unitOptions")],z.prototype,"unitOptions",void 0),e([t("viewModel.unit")],z.prototype,"unit",void 0),e([n()],z.prototype,"_newMeasurement",null),e([n()],z.prototype,"_changeUnit",null),z=e([r("esri.widgets.AreaMeasurement3D")],z);var B=z;export default B;
