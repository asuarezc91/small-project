/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{removeMaybe as e,isNone as t,isSome as i}from"../../../core/maybe.js";import{destroyHandle as r,handlesGroup as o}from"../../../core/handleUtils.js";import{f as l}from"../../../chunks/vec4f64.js";import{getGraphicEffectiveElevationInfo as a}from"../../../support/elevationInfoUtils.js";import{INPUT_LINE_SELECTED_STYLE_3D as s}from"./constants.js";import{OutlineVisualElement as n}from"../../../views/3d/interactive/visualElements/OutlineVisualElement.js";import{GraphicState as m}from"../../../views/3d/layers/graphics/GraphicState.js";class c{constructor(e){this._params=e,this._visualElementHandle=null}destroy(){this.remove()}remove(){this._visualElementHandle=e(this._visualElementHandle)}update(e){if(this.remove(),t(e))return;const i=this._params.view,c=new n({view:i,geometry:d(e)?e.geometry:null,attached:!1,elevationInfo:a(e),renderOccluded:8,innerWidth:s.width-s.outlineSize,width:s.width,innerColor:l(s.color),color:l(s.outlineColor),falloff:s.falloff}),h=new m({graphic:e}),p=()=>c.attached=h.displaying,u=[h.watch("displaying",p),h.watch("isDraped",(e=>c.isDraped=e)),h.on("changed",(()=>c.geometry=d(e)?e.geometry:null)),i.trackGraphicState(h),i.maskOccludee(e),r(c)];p(),this._visualElementHandle=o(u)}}function d(e){return i(e.geometry)&&"polyline"===e.geometry.type}export{c as InputRepresentation3D};
