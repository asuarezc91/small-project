/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as i}from"../chunks/tslib.es6.js";import"../core/has.js";import"../core/Logger.js";import"../core/accessorSupport/ensureType.js";import{property as o}from"../core/accessorSupport/decorators/property.js";import{aliasOf as e}from"../core/accessorSupport/decorators/aliasOf.js";import{subclass as s}from"../core/accessorSupport/decorators/subclass.js";import"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import{after as t}from"../core/promiseUtils.js";import{watch as r}from"../core/watchUtils.js";import"./support/widgetUtils.js";import{renderable as n}from"./support/decorators/renderable.js";import{j as l}from"../chunks/index.js";import c from"./Widget.js";import a from"./Spinner/SpinnerViewModel.js";const p="esri-spinner",m="esri-spinner--start",d="esri-spinner--finish";let h=class extends c{constructor(i,o){super(i,o),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new a,this.visible=!1}initialize(){this.own([r(this,"visible",(i=>this._visibleChange(i)))])}destroy(){this._animationPromise=null}show(i){const{location:o,promise:e}=i;o&&(this.viewModel.location=o),this.visible=!0;const s=()=>this.hide();e&&e.catch((()=>{})).then(s)}hide(){this.visible=!1}render(){const{visible:i}=this,{screenLocation:o}=this.viewModel,e=!!o,s={[m]:i&&e,[d]:!i&&e},t=this._getPositionStyles();return l("div",{class:this.classes(p,s),styles:t})}_visibleChange(i){if(i)return void(this.viewModel.screenLocationEnabled=!0);const o=t(this._animationDelay);this._animationPromise=o,o.catch((()=>{})).then((()=>{this._animationPromise===o&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)}))}_getPositionStyles(){const{screenLocation:i,view:o}=this.viewModel;if(!o||!i)return{};const{padding:e}=o;return{left:i.x-e.left+"px",top:i.y-e.top+"px"}}};i([e("viewModel.location")],h.prototype,"location",void 0),i([e("viewModel.view")],h.prototype,"view",void 0),i([o({type:a}),n(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],h.prototype,"viewModel",void 0),i([e("viewModel.visible")],h.prototype,"visible",void 0),h=i([s("esri.widgets.Spinner")],h);var v=h;export default v;
