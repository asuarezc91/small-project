/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import"../../core/has.js";import"../../core/Logger.js";import"../../core/accessorSupport/ensureType.js";import{property as r}from"../../core/accessorSupport/decorators/property.js";import{aliasOf as i}from"../../core/accessorSupport/decorators/aliasOf.js";import{subclass as o}from"../../core/accessorSupport/decorators/subclass.js";import"../../core/urlUtils.js";import"../../core/uuid.js";import"../../portal/support/resourceExtension.js";import"../support/widgetUtils.js";import{messageBundle as s}from"../support/decorators/messageBundle.js";import{renderable as t}from"../support/decorators/renderable.js";import{j as l}from"../../chunks/index.js";import{SmartMappingSliderBase as a}from"./SmartMappingSliderBase.js";import d from"./ColorSlider/ColorSliderViewModel.js";var n;const p="esri-color-slider",m="esri-color-slider__ramp",c="esri-color-slider__slider-container",u="esri-color-slider__histogram-container",h="esri-widget",v="esri-widget--panel",g="esri-disabled";let w=n=class extends a{constructor(e,r){super(e,r),this._bgFillId=null,this._rampFillId=null,this.handlesSyncedToPrimary=null,this.label=void 0,this.messages=null,this.primaryHandleEnabled=null,this.stops=null,this.viewModel=new d,this.zoomOptions=null,this.viewModel&&this.viewModel.set("thumbsConstrained",!1),this._bgFillId=`${this.id}-bg-fill`,this._rampFillId=`${this.id}-linear-gradient`}static fromRendererResult(e,r){const{visualVariable:{stops:i},statistics:o}=e,{avg:s,stddev:t}=o,l=e.renderer.authoringInfo.visualVariables.filter((e=>"color"===e.type))[0],a=l.minSliderValue,d=l.maxSliderValue;return new n({max:d,min:a,stops:i,histogramConfig:{average:s,standardDeviation:t,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==l.theme})}updateFromRendererResult(e,r){const{visualVariable:{stops:i},statistics:o}=e,{avg:s,stddev:t}=o,l=e.renderer.authoringInfo.visualVariables.filter((e=>"color"===e.type))[0],a=l.minSliderValue,d=l.maxSliderValue;this.set({max:d,min:a,stops:i,histogramConfig:{average:s,standardDeviation:t,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==l.theme})}render(){const{state:e,label:r}=this,i="disabled"===e,o=this.classes(p,h,v,{[g]:i});return l("div",{"aria-label":r,class:o},i?null:this.renderContent(this.renderRamp(),c,u))}renderRamp(){const{_bgFillId:e,_rampFillId:r,viewModel:i,zoomOptions:o}=this,s=i.getStopInfo();return l("div",{class:m},l("svg",{xmlns:"http://www.w3.org/2000/svg"},l("defs",null,this.renderRampFillDefinition(r,s),this.renderBackgroundFillDefinition(e)),l("rect",{x:"0",y:"0",fill:`url(#${e})`,height:"100%",width:"100%"}),l("rect",{x:"0",y:"0",fill:`url(#${r})`,height:"100%",width:"100%"})),o?this.renderZoomCaps():null)}};e([i("viewModel.handlesSyncedToPrimary")],w.prototype,"handlesSyncedToPrimary",void 0),e([r({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],w.prototype,"label",void 0),e([r(),t(),s("esri/widgets/smartMapping/ColorSlider/t9n/ColorSlider")],w.prototype,"messages",void 0),e([i("viewModel.primaryHandleEnabled")],w.prototype,"primaryHandleEnabled",void 0),e([i("viewModel.stops")],w.prototype,"stops",void 0),e([r(),t(["viewModel.handlesSyncedToPrimary","viewModel.hasTimeData","viewModel.inputFormatFunction","viewModel.inputParseFunction","viewModel.labelFormatFunction","viewModel.max","viewModel.min","viewModel.primaryHandleEnabled","viewModel.stops","viewModel.values","viewModel.zoomOptions"])],w.prototype,"viewModel",void 0),e([i("viewModel.zoomOptions")],w.prototype,"zoomOptions",void 0),w=n=e([o("esri.widgets.smartMapping.ColorSlider")],w);var b=w;export default b;
