/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{isSome as t}from"../../../core/maybe.js";import{formatDate as n}from"../../../intl/date.js";import e from"../../../Color.js";import o from"../../../renderers/visualVariables/SizeVariable.js";import{timelineDateFormatOptions as r}from"../../../renderers/support/utils.js";function i(t){return n(new Date(t),r)}function s(n,e,o){if(!t(e)||!t(n))return[];const r=[];for(let t=-1*o;t<=o;t++)0!==t&&r.push(e+t*n);return r}function a(t){const{max:n,min:e,padding:o,pathHeight:r,pathWidth:i,stops:s}=t,a=n-e;let u,p=`M0 0 L${i} 0 `;const h=3===s.length?[s[0],s[1],s[2]]:[s[0],s[2],s[4]],m=Math.max.apply(Math,h.map((t=>t.size))),f=Math.min.apply(Math,h.map((t=>t.size))),l=m-f;return h.reverse(),h.forEach((({size:t,value:n},s)=>{const h=Math.round((t-f)/l*100)/100,m=Math.round(r-(n-e)/a*r);u=h*i,0===u&&(u=o*i),0===s&&(p+=`L${u} 0 `),p+=`L${u} ${m} `})),p+=`L${u} ${r} L0 ${r} L0 0 Z`,p}function u(t){const{bottomValue:n,bottomWidth:e,max:o,min:r,pathHeight:i,pathWidth:s,topValue:a,topWidth:u}=t,p=u*s,h=e*s,m=o-r,f=Math.round(i-(n-r)/m*i);return`M${p} 0 L${p} ${Math.round(i-(a-r)/m*i)} L${h} ${f} L${h} ${i} L0 ${i} L0 0 Z`}function p(t){let n=t.maxSize,e=t.minSize;return n instanceof o&&(n=n.stops[0].size),e instanceof o&&(e=e.stops[0].size),[n,e]}function h(t,n,e){const o=e.length-1,r=e[0],i=e[o]-r,s=n-t,a=[];for(let n=1;n<o;n++){const o=(e[n]-r)/i*s+t;a.push({index:n,value:o})}return a.unshift({index:0,value:t}),a.push({index:o,value:n}),a}function m(t){return t instanceof e?t.toCss(!0):e.fromString(t).toCss(!0)}export{i as formatDateLabel,s as getDeviationValues,a as getDynamicPathForSizeStops,m as getFillFromColor,u as getPathForSizeStops,p as getSizesFromVariable,h as getStopChanges};
