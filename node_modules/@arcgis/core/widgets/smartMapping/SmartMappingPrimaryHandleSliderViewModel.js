/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import"../../core/has.js";import"../../core/Logger.js";import"../../core/accessorSupport/ensureType.js";import{property as t}from"../../core/accessorSupport/decorators/property.js";import{subclass as r}from"../../core/accessorSupport/decorators/subclass.js";import"../../core/urlUtils.js";import"../../core/uuid.js";import"../../portal/support/resourceExtension.js";import n from"./SmartMappingSliderViewModel.js";let s=class extends n{constructor(e){super(e),this.handlesSyncedToPrimary=!0}set primaryHandleEnabled(e){this._set("primaryHandleEnabled",e)}get primaryHandleEnabled(){const{stops:e}=this;if(!e||!e.length)return!1;const t=e.length;return(3===t||5===t)&&this._get("primaryHandleEnabled")}get values(){const{primaryHandleEnabled:e,stops:t}=this;if(!t||!t.length||t.length<2)return[];const r=this.getValuesFromStops();return e?3===r.length?[r[0],r[1],r[2]]:[r[0],r[2],r[4]]:[r[0],r[r.length-1]]}getStopIndexFromValueIndex(e){const{primaryHandleEnabled:t,stops:r}=this;return 0===e?0:t&&1===e?2:r.length-1}getStopChanges(e,t){return this.primaryHandleEnabled?1===e?this._getStopChangesAfterPrimaryHandleMove(e,t):this._getStopChangesAfterSecondaryHandleMove(e,t):this._getStopChangesAfterHandleMove(e,t)}_getStopChangesAfterPrimaryHandleMove(e,t){const{handlesSyncedToPrimary:r,stops:n,values:s}=this,o=this.getStopIndexFromValueIndex(e);if(r){const{max:r,min:o}=this,a=t-s[e],i=Math.max(Math.min(s[0]+a,r),o),l=Math.max(Math.min(s[2]+a,r),o);return 5===n.length?[{index:0,value:this.toPrecision(i)},{index:1,value:this.toPrecision((t+i)/2)},{index:2,value:t},{index:3,value:this.toPrecision((t+l)/2)},{index:4,value:this.toPrecision(l)}]:[{index:0,value:i},{index:1,value:t},{index:2,value:l}]}return 5===n.length?[{index:1,value:this.toPrecision((s[1]+s[0])/2)},{index:2,value:t},{index:3,value:this.toPrecision((s[1]+s[2])/2)}]:[{index:o,value:t}]}_getStopChangesAfterSecondaryHandleMove(e,t){const{stops:r,values:n}=this,s=this.getStopIndexFromValueIndex(e);if(5===r.length){return[{index:s,value:t},{index:0===s?1:3,value:this.toPrecision((t+n[1])/2)}]}return[{index:s,value:t}]}_getStopChangesAfterHandleMove(e,t){const{max:r,min:n,stops:s,values:o}=this,a=this.getStopIndexFromValueIndex(e),i=0===e?n:o[e-1],l=e===o.length-1?r:o[e+1],d=s.map((e=>e.hasOwnProperty("ratio")?e.ratio:e.value));d[a]=Math.max(Math.min(t,l),i);const p=d[d.length-1]-d[0],h=s.length-1;return d.map(((e,t)=>({index:t,value:this.toPrecision(d[0]+t*p/h)})))}};e([t()],s.prototype,"handlesSyncedToPrimary",void 0),e([t({dependsOn:["stops","stops.length"]})],s.prototype,"primaryHandleEnabled",null),e([t({dependsOn:["primaryHandleEnabled","stops","stops.length"],readOnly:!0})],s.prototype,"values",null),s=e([r("esri.widgets.smartMapping.SmartMappingPrimaryHandleSliderViewModel")],s);var o=s;export default o;
