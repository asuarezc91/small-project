/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import"../../../core/has.js";import{isSome as s}from"../../../core/maybe.js";import"../../../core/Logger.js";import"../../../core/accessorSupport/ensureType.js";import{property as e}from"../../../core/accessorSupport/decorators/property.js";import{subclass as o}from"../../../core/accessorSupport/decorators/subclass.js";import"../../../core/urlUtils.js";import"../../../core/uuid.js";import"../../../portal/support/resourceExtension.js";import{onLocaleChange as i}from"../../../intl/locale.js";import{fetchMessageBundle as r}from"../../../intl/messages.js";import"../../../intl.js";import a from"../../../core/Handles.js";import{getStopChanges as n}from"../support/utils.js";import p from"../SmartMappingSliderViewModel.js";let l=class extends p{constructor(t){super(t),this._handles=new a,this._initialRatios=[],this.hasTimeData=!1,this.labelFormatFunction=(t,s)=>"min"===s?this.messages.bottomLabel:"max"===s?this.messages.topLabel:t.toString(),this.max=1,this.messages=null,this.min=0,this.zoomingEnabled=!1}initialize(){const t=async()=>this.messages=await r("esri/widgets/smartMapping/HeatmapSlider/t9n/HeatmapSlider");t(),this._handles.add(i(t))}get state(){const{messages:t,max:e,min:o}=this;return t&&s(e)&&s(o)?"ready":"disabled"}set stops(t){this._initialRatios=null==t?void 0:t.map((t=>t.ratio)),this._set("stops",t)}get values(){const{stops:t}=this;return!t||!t.length||t.length<2?[]:[t[0].ratio,t[t.length-1].ratio]}setValue(t,s){const{max:e,min:o,stops:i}=this;if(s>e||s<o)return;if(s===i[t].ratio)return;const{values:r}=this,a=0===t?0:i.length-1,p=0===t?o:r[t-1],l=t===r.length-1?e:r[t+1],m=Math.max(Math.min(s,l),p),d=0===a?m:i[0].ratio,h=0===a?i[i.length-1].ratio:m,c=n(d,h,this._initialRatios);this.updateStops(c),this.notifyChange("values"),this.notifyChange("labels")}getStopInfo(){const{stops:t}=this;return t&&t.length?t.map((t=>({color:t.color,offset:1-t.ratio}))):[]}};t([e({readOnly:!0})],l.prototype,"hasTimeData",void 0),t([e({dependsOn:["messages"],readOnly:!0})],l.prototype,"labelFormatFunction",void 0),t([e({readOnly:!0})],l.prototype,"max",void 0),t([e()],l.prototype,"messages",void 0),t([e({readOnly:!0})],l.prototype,"min",void 0),t([e({dependsOn:["max","messages","min"],readOnly:!0})],l.prototype,"state",null),t([e()],l.prototype,"stops",null),t([e({dependsOn:["stops"],readOnly:!0})],l.prototype,"values",null),t([e({readOnly:!0})],l.prototype,"zoomingEnabled",void 0),l=t([o("esri.widgets.smartMapping.HeatmapSlider.HeatmapSliderViewModel")],l);var m=l;export default m;
