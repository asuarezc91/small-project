/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../core/has.js";import"../core/Logger.js";import"../core/accessorSupport/ensureType.js";import{property as s}from"../core/accessorSupport/decorators/property.js";import{aliasOf as t}from"../core/accessorSupport/decorators/aliasOf.js";import{subclass as i}from"../core/accessorSupport/decorators/subclass.js";import"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import{ignoreAbortErrors as r}from"../core/promiseUtils.js";import{isMeasurementSystem as n}from"../core/unitUtils.js";import"./support/widgetUtils.js";import{accessibleHandler as o}from"./support/decorators/accessibleHandler.js";import{messageBundle as a}from"./support/decorators/messageBundle.js";import{renderable as l}from"./support/decorators/renderable.js";import{j as d}from"../chunks/index.js";import c from"./Widget.js";import u from"./DirectLineMeasurement3D/DirectLineMeasurement3DViewModel.js";const m="esri-button esri-button--secondary",p="esri-button--disabled",v="esri-direct-line-measurement-3d",_="esri-widget",h="esri-widget--panel",w="esri-direct-line-measurement-3d__container",b="esri-direct-line-measurement-3d__hint",y="esri-direct-line-measurement-3d__hint-text",g="esri-direct-line-measurement-3d__panel--error",M="esri-direct-line-measurement-3d__measurement",j="esri-direct-line-measurement-3d__measurement-item",f="esri-direct-line-measurement-3d__measurement-item--disabled",D="esri-direct-line-measurement-3d__measurement-item-title",k="esri-direct-line-measurement-3d__measurement-item-value",U="esri-direct-line-measurement-3d__settings",x="esri-direct-line-measurement-3d__units",L="esri-direct-line-measurement-3d__units-label",O="esri-direct-line-measurement-3d__units-select esri-select",S="esri-direct-line-measurement-3d__units-select-wrapper",z="esri-direct-line-measurement-3d__actions",C="esri-direct-line-measurement-3d__clear-button",$="esri-icon-measure-line";let B=class extends c{constructor(e,s){super(e,s),this.view=null,this.visible=null,this.iconClass=$,this.label=void 0,this.messages=null,this.messagesUnits=null,this.viewModel=new u,this.unitOptions=null,this.unit=null}render(){const{isSupported:e,active:s,state:t,measurement:i,unit:r}=this.viewModel,o="disabled"===t,a="ready"===t,l="measuring"===t||"measured"===t,{messages:c,messagesUnits:u}=this,$=s&&a?d("section",{key:"esri-direct-line-measurement-3d__hint",class:b},d("p",{class:y},c.hint)):null,B=e?null:d("section",{key:"esri-direct-line-measurement-3d__unsupported",class:g},d("p",null,c.unsupported)),E=(e,s,t)=>{switch(s.state){case"available":return d("div",{key:`${t}-enabled`,class:j},d("span",{class:D},e),d("span",{class:k},s.text));case"unavailable":return d("div",{key:`${t}-disabled`,class:this.classes(j,f)},d("span",{class:D},e))}},H=l?d("section",{key:"esri-direct-line-measurement-3d__measurement",class:M},E(c.direct,i.directDistance,"direct"),E(c.horizontal,i.horizontalDistance,"horizontal"),E(c.vertical,i.verticalDistance,"vertical")):null,I=`${this.id}__units`,T=d("label",{class:L,for:I},c.unit),V=d("div",{class:S},d("select",{class:O,id:I,onchange:this._changeUnit,bind:this,value:r},this.viewModel.unitOptions.map((e=>{var s;return d("option",{key:e,value:e},n(e)?u.systems[e]:null==(s=u.units[e])?void 0:s.pluralCapitalized)})))),W=d("section",{key:"esri-direct-line-measurement-3d__units",class:x},T,V),q=l?d("div",{key:"settings",class:U},W):null,A=!e||s&&!l?null:d("div",{class:z},d("button",{disabled:o,class:this.classes(m,C,o&&p),bind:this,onclick:this._newMeasurement,type:"button"},c.newMeasurement)),F=this.visible?d("div",{class:w},B,$,q,H,A):null;return d("div",{key:"",class:this.classes(v,_,h),role:"presentation"},F)}_newMeasurement(){r(this.viewModel.start())}_changeUnit(e){const s=e.target,t=s.options[s.selectedIndex];t&&(this.unit=t.value)}};e([t("viewModel.view")],B.prototype,"view",void 0),e([t("viewModel.visible"),l()],B.prototype,"visible",void 0),e([t("viewModel.active"),l()],B.prototype,"active",void 0),e([s()],B.prototype,"iconClass",void 0),e([s({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],B.prototype,"label",void 0),e([s(),l(),a("esri/widgets/DirectLineMeasurement3D/t9n/DirectLineMeasurement3D")],B.prototype,"messages",void 0),e([s(),l(),a("esri/core/t9n/Units")],B.prototype,"messagesUnits",void 0),e([s({type:u}),l(["viewModel.state","viewModel.unitOptions","viewModel.unit","viewModel.measurement"])],B.prototype,"viewModel",void 0),e([t("viewModel.unitOptions")],B.prototype,"unitOptions",void 0),e([t("viewModel.unit")],B.prototype,"unit",void 0),e([o()],B.prototype,"_newMeasurement",null),e([o()],B.prototype,"_changeUnit",null),B=e([i("esri.widgets.DirectLineMeasurement3D")],B);var E=B;export default E;
