/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{pt2px as e}from"../../../../core/screenUtils.js";import{classes as r}from"../../../support/widgetUtils.js";import"../../../../libs/maquette/projection.js";import{createProjector as t}from"../../../../libs/maquette/projector.js";import{j as i}from"../../../../chunks/index.js";import{renderColorRampPreviewHTML as s}from"../../../../symbols/support/symbolUtils.js";import{generateFillAttributes as l,generateStrokeAttributes as a,renderDef as o,renderShape as n,getBoundingBox as m,computeBBox as c,getTransformMatrix as p}from"../../../../symbols/support/svgUtils.js";const d=t(),u="http://www.w3.org/2000/svg",h="esri-relationship-ramp--diamond__container",f="esri-relationship-ramp--diamond__left-column",v="esri-relationship-ramp--diamond__right-column",k="esri-relationship-ramp--diamond__middle-column",b="esri-relationship-ramp--diamond__middle-column--label",_="esri-relationship-ramp--diamond__middle-column--ramp",g="esri-relationship-ramp--square__table",w="esri-relationship-ramp--square__table-row",y="esri-relationship-ramp--square__table-cell",x="esri-relationship-ramp--square__table-label",z="esri-relationship-ramp--square__table-label--left-bottom",E="esri-relationship-ramp--square__table-label--right-bottom",$="esri-relationship-ramp--square__table-label--left-top",q="esri-relationship-ramp--square__table-label--right-top",j="esri-univariate-above-and-below-ramp__symbol",S="esri-legend__color-ramp";function U(e,t,s){const{focus:d,labels:j}=e,S=!!d,U=function(e,r,t,s=60){const{focus:d,numClasses:h,colors:f,rotation:v}=e,k=!!d,b=Math.sqrt(Math.pow(s,2)+Math.pow(s,2))+(k?0:5);let g=null;null!=t&&(g=`opacity: ${t}`);const w=[],x=[],z=[],E=(s||75)/h;for(let e=0;e<h;e++){const r=e*E;for(let t=0;t<h;t++){const i=t*E,s=l(f[e][t]),c=a(null),p={type:"rect",x:i,y:r,width:E,height:E};w.push(o(s)),x.push(n(p,s.fill,c,null)),z.push(m(p))}}const $=10,q=15,j=15,S=10;let U=null;k||(U="margin: -15px -15px -18px -15px");const H=L("left",d,r),N=L("right",d,r),W=c(z),C=p(W,b,b,0,!1,v),M=p(W,b,b,0,!1,k?-45:null);return i("div",{style:g,class:k?_:y},i("svg",{xmlns:u,width:b,height:b,style:U},i("defs",null,i("marker",{id:`${r}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},i("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),i("marker",{id:`${r}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},i("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),w),i("g",{transform:C},x),i("g",{transform:M},i("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":H.markerStart,"marker-end":H.markerEnd,x1:-$,y1:s-q,x2:-$,y2:q}),i("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":N.markerStart,"marker-end":N.markerEnd,x1:j,y1:s+S,x2:s-j,y2:s+S}))))}(e,t,s);return S?i("div",{class:h},i("div",{class:f},j.left),i("div",{class:k},i("div",{class:b},j.top),U,i("div",{class:b},j.bottom)),i("div",{class:v},j.right)):i("div",{class:g},i("div",{class:w},i("div",{class:r(y,x,E)},j.left),i("div",{class:y}),i("div",{class:r(y,x,z)},j.top)),i("div",{class:w},i("div",{class:y}),U,i("div",{class:y})),i("div",{class:w},i("div",{class:r(y,x,q)},j.bottom),i("div",{class:y}),i("div",{class:r(y,x,$)},j.right)))}function L(e,r,t){const i=`${t}_arrowStart`,s=`${t}_arrowEnd`,l="left"===e,a={markerStart:null,markerEnd:null};switch(r){case"HL":l?a.markerStart=`url(#${s})`:a.markerEnd=`url(#${i})`;break;case"LL":a.markerStart=`url(#${s})`;break;case"LH":l?a.markerEnd=`url(#${i})`:a.markerStart=`url(#${s})`;break;default:a.markerEnd=`url(#${i})`}return a}function H(e="vertical"){const r="stroke:rgb(200, 200, 200);stroke-width:1";return"vertical"===e?i("svg",{height:"4",width:"10"},i("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:r})):i("svg",{height:"10",width:"10"},i("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:r}))}function N(e,r="vertical"){const t=document.createElement("div");return t.style.height="20px",t.className=j,null!=e&&(t.style.opacity=e.toString()),d.append(t,H.bind(null,r)),t}function W(r,t="classic"){const i=r.infos;return"classic"===t?(e(i[0].size)+10)/2:(i[0].size-i[i.length-1].size)/2}function C(e,r){if(!e)return null;const t=e.infos.map((e=>e.color)),i=s("full"===r.type?t:"above"===r.type?t.slice(0,3):t.slice(2,5),{width:r.width,height:r.height,align:r.rampAlignment});return i.className=S,null!=r.opacity&&(i.style.opacity=r.opacity.toString()),i}function M(r,t,i="vertical"){let s=0;const l=r.infos,a="full"===t||"below"===t?4:2;for(let r="full"===t||"above"===t?0:2;r<=a;r++)if(2===r)s+="horizontal"===i?10:20;else{s+=e(l[r].size)+("horizontal"===i?20:10)}return s}function R(r,t,i="vertical"){const s=M(r,t,i),l=r.infos,a="full"===t||"above"===t?0:2,o="full"===t||"below"===t?4:2,n="full"===t?l[a].size+l[o].size:"above"===t?l[a].size:l[o].size;return s-(e(n/2)+15)}function X(r,t,i="vertical"){const s=r.infos;let l=s.filter((({type:e})=>"size-ramp"===e))[0],a=s.filter((({type:e})=>"color-ramp"===e))[0];var o;(l&&(l={...l},l.infos=[...l.infos]),a&&(a={...a},a.infos=[...a.infos]),function(r,t,i="vertical"){r.infos.forEach(((r,s)=>{if(2===s)r.preview=N(t,i);else{const t=e(r.size)+("horizontal"===i?20:10),s="div"===r.preview.tagName.toLowerCase(),l=s?r.preview:document.createElement("div");l.className=j,"horizontal"===i?l.style.width=`${t}px`:l.style.height=`${t}px`,s||l.appendChild(r.preview),r.preview=l}}))}(l,t,i),"horizontal"===i)&&(l.infos.reverse(),null==(o=a)||o.infos.reverse());return{sizeRampElement:l,colorRampElement:a}}export{W as getUnivariateAboveAndBelowColorRampMargin,C as getUnivariateAboveAndBelowColorRampPreview,R as getUnivariateAboveAndBelowColorRampSize,X as getUnivariateAboveAndBelowRampElements,M as getUnivariateAboveAndBelowSizeRampSize,U as renderRelationshipRamp};
