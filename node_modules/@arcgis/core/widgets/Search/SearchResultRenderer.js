/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import"../../core/has.js";import"../../core/Logger.js";import"../../core/accessorSupport/ensureType.js";import{property as s}from"../../core/accessorSupport/decorators/property.js";import{subclass as r}from"../../core/accessorSupport/decorators/subclass.js";import"../../core/urlUtils.js";import"../../core/uuid.js";import"../../portal/support/resourceExtension.js";import"../support/widgetUtils.js";import{accessibleHandler as t}from"../support/decorators/accessibleHandler.js";import{messageBundle as o}from"../support/decorators/messageBundle.js";import{renderable as l}from"../support/decorators/renderable.js";import{j as i}from"../../chunks/index.js";import u from"../Widget.js";import n from"./SearchViewModel.js";const d="esri-search-result-renderer esri-widget",c="esri-widget__anchor",a="esri-search-result-renderer__more-results--show-more-results",h="esri-search-result-renderer__more-results",p="esri-search-result-renderer__more-results-list",m="esri-search-result-renderer__more-results-item",_="esri-search-result-renderer__more-results-list-header";let M=class extends u{constructor(e,s){super(e,s),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const e={[a]:this.showMoreResultsOpen};return i("div",{class:d},i("div",{key:"esri-search-renderer__container",class:this.classes(h,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return i("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var e;const s=null==(e=this.viewModel)?void 0:e.selectedResult,r=s&&s.name||"";return i("div",{key:"esri-search-renderer__result-name",class:m},r)}renderMoreResultsLists(){var e;const s=null==(e=this.viewModel)?void 0:e.results,{resultCount:r}=this.viewModel;if(r<2)return null;const t=s.map((e=>this.renderMoreResultsList(e)));return i("div",{key:"esri-search-renderer__more-results-container",class:p},t)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:s}=this.viewModel;return s<2?null:i("div",{key:"esri-search-renderer__more-results-button",class:m},i("a",{class:c,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,s){return i("div",{key:`esri-search-result-renderer__header-${s}`,class:_},e)}renderMoreResultsList(e){var s,r;const{results:t}=e,o=t.length,l=!!o,u=null==(s=this.viewModel)?void 0:s.selectedResult,n=1===o&&t[0]===u,d=this._getSourceName(e.source,e.sourceIndex),c=(null==(r=this.viewModel)?void 0:r.results.length)>1&&!n?this.renderMoreResultsHeader(d,e.sourceIndex):null,a=l&&t.map(((e,s)=>this.renderMoreResultsListItem(e,s))),h=l&&!n?i("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},a):null;return l?i("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},c,h):null}renderMoreResultsListItem(e,s){return e!==this.get("viewModel.selectedResult")?i("li",{key:`esri-search-result-renderer__list-item-${s}`},i("a",{class:c,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const s=this.get("viewModel.view.popup");s&&s.reposition()}_selectResultClick(e){e.preventDefault();const s=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(s)}_getSourceName(e,s){return s===n.ALL_INDEX?this.messages.all:e.name}};e([s(),l(),o("esri/widgets/Search/t9n/Search")],M.prototype,"messages",void 0),e([l(),s()],M.prototype,"showMoreResultsOpen",void 0),e([s(),l(["viewModel.results","viewModel.selectedResult","viewModel.resultCount"])],M.prototype,"viewModel",void 0),e([t()],M.prototype,"_showMoreResultsClick",null),e([t()],M.prototype,"_selectResultClick",null),M=e([r("esri.widgets.Search.SearchResultRenderer")],M);var v=M;export default v;
