/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../core/has.js";import"../core/Logger.js";import"../core/accessorSupport/ensureType.js";import{property as s}from"../core/accessorSupport/decorators/property.js";import{aliasOf as t}from"../core/accessorSupport/decorators/aliasOf.js";import{subclass as r}from"../core/accessorSupport/decorators/subclass.js";import"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import{ignoreAbortErrors as i}from"../core/promiseUtils.js";import{isMeasurementSystem as a}from"../core/unitUtils.js";import"./support/widgetUtils.js";import{accessibleHandler as o}from"./support/decorators/accessibleHandler.js";import{messageBundle as n}from"./support/decorators/messageBundle.js";import{renderable as l}from"./support/decorators/renderable.js";import{j as u}from"../chunks/index.js";import m from"./Widget.js";import d from"./AreaMeasurement2D/AreaMeasurement2DViewModel.js";const p="esri-button esri-button--secondary",c="esri-button--disabled",v="esri-icon-measure-area",_="esri-area-measurement-2d",w="esri-widget",b="esri-widget--panel",h="esri-area-measurement-2d__container",y="esri-area-measurement-2d__hint",M="esri-area-measurement-2d__hint-text",g="esri-area-measurement-2d__panel--error",j="esri-area-measurement-2d__measurement",f="esri-area-measurement-2d__measurement-item",k="esri-area-measurement-2d__measurement-item--disabled",U="esri-area-measurement-2d__measurement-item-title",O="esri-area-measurement-2d__measurement-item-value",x="esri-area-measurement-2d__settings",A="esri-area-measurement-2d__units",D="esri-area-measurement-2d__units-label",S="esri-area-measurement-2d__units-select esri-select",L="esri-area-measurement-2d__units-select-wrapper",C="esri-area-measurement-2d__actions",$="esri-area-measurement-2d__clear-button";let z=class extends m{constructor(e,s){super(e,s),this.active=null,this.iconClass=v,this.label=void 0,this.messages=null,this.messagesUnits=null,this.unit=null,this.unitOptions=null,this.view=null,this.viewModel=new d}render(){const{id:e,viewModel:s,visible:t}=this,{active:r,isSupported:i,measurementLabel:o,state:n,unit:l,unitOptions:m}=s,d="disabled"===n,v="ready"===n,z="measuring"===n||"measured"===n,{messages:B,messagesUnits:E}=this,H=r&&v?u("section",{key:"hint",class:y},u("p",{class:M},B.hint)):null,I=i?null:u("section",{key:"unsupported",class:g},u("p",null,B.unsupported)),T=(e,s,t)=>s?u("div",{key:`${t}-enabled`,class:f},u("span",{class:U},e),u("span",{class:O},s)):u("div",{key:`${t}-disabled`,class:this.classes(f,k),"aria-disabled":"true"},u("span",{class:U},e)),V=z?u("section",{key:"measurement",class:j},T(B.area,o.area,"area"),T(B.perimeter,o.perimeter,"perimeter")):null,W=`${e}__units`,q=u("section",{key:"units",class:A},u("label",{class:D,for:W},B.unit),u("div",{class:L},u("select",{class:S,id:W,onchange:this._changeUnit,bind:this,value:l},m.map((e=>{var s;return u("option",{key:e,value:e},a(e)?E.systems[e]:null==(s=E.units[e])?void 0:s.pluralCapitalized)}))))),F=z?u("div",{key:"settings",class:x},q):null,G=!i||r&&!z?null:u("div",{class:C},u("button",{disabled:d,class:this.classes(p,$,d&&c),bind:this,onclick:this._newMeasurement,title:B.newMeasurement,type:"button","aria-label":B.newMeasurement},B.newMeasurement)),J=t?u("div",{class:h},I,H,F,V,G):null;return u("div",{class:this.classes(_,w,b)},J)}_newMeasurement(){i(this.viewModel.start())}_changeUnit(e){const s=e.target,t=s.options[s.selectedIndex];t&&(this.viewModel.unit=t.value)}};e([t("viewModel.active"),l()],z.prototype,"active",void 0),e([s()],z.prototype,"iconClass",void 0),e([s({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],z.prototype,"label",void 0),e([s(),l(),n("esri/widgets/AreaMeasurement2D/t9n/AreaMeasurement2D")],z.prototype,"messages",void 0),e([s(),l(),n("esri/core/t9n/Units")],z.prototype,"messagesUnits",void 0),e([t("viewModel.unit")],z.prototype,"unit",void 0),e([t("viewModel.unitOptions")],z.prototype,"unitOptions",void 0),e([t("viewModel.view")],z.prototype,"view",void 0),e([s({type:d}),l(["viewModel.state","viewModel.unitOptions","viewModel.unit","viewModel.measurementLabel"])],z.prototype,"viewModel",void 0),e([t("viewModel.visible"),l()],z.prototype,"visible",void 0),e([o()],z.prototype,"_newMeasurement",null),e([o()],z.prototype,"_changeUnit",null),z=e([r("esri.widgets.AreaMeasurement2D")],z);var B=z;export default B;
