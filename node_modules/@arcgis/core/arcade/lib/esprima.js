/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
export{Syntax}from"./syntax.js";import{CommentHandler as t}from"./comment-handler.js";import{Parser as e}from"./parser.js";import{Tokenizer as o}from"./tokenizer.js";function r(o,r,n){let c=null;const s=(t,e)=>{n&&n(t,e),c&&c.visit(t,e)};let m,a="function"==typeof n?s:null,f=!1;if(r){f="boolean"==typeof r.comment&&r.comment;const e="boolean"==typeof r.attachComment&&r.attachComment;(f||e)&&(c=new t,c.attach=e,r.comment=!0,a=s)}m=new e(o,r,a);const i=m.parseScript();return f&&c&&(i.comments=c.comments),m.config.tokens&&(i.tokens=m.tokens),m.config.tolerant&&(i.errors=m.errorHandler.errors),i}function n(t,e,o){const n=e||{};return n.sourceType="script",r(t,n,o)}function c(t,e,r){const n=new o(t,e),c=[];try{for(;;){let t=n.getNextToken();if(!t)break;r&&(t=r(t)),c.push(t)}}catch(t){n.errorHandler.tolerate(t)}return n.errorHandler.tolerant&&(c.errors=n.errors()),c}const s="4.0.0-dev";export{r as parse,n as parseScript,c as tokenize,s as version};
