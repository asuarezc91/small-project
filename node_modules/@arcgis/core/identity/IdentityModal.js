/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as t}from"../chunks/tslib.es6.js";import"../core/has.js";import"../core/Logger.js";import"../core/accessorSupport/ensureType.js";import{property as e}from"../core/accessorSupport/decorators/property.js";import{subclass as s}from"../core/accessorSupport/decorators/subclass.js";import"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import{messageBundle as o}from"../widgets/support/decorators/messageBundle.js";import{renderable as i}from"../widgets/support/decorators/renderable.js";import{j as r}from"../chunks/index.js";import{isWidget as a}from"../widgets/support/widget.js";import n from"../widgets/Widget.js";import{createFocusTrap as c}from"focus-trap";const d="esri-identity-modal",l="esri-identity-modal--open",p="esri-identity-modal--closed",u="esri-identity-modal__title",m="esri-identity-modal__dialog",h="esri-identity-modal__content",_="esri-identity-modal__close-button",y="esri-icon-close";let g=class extends n{constructor(t,e){super(t,e),this.container=document.createElement("div"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch("open",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:s,title:o,messages:i}=this,a=e&&!!s,n={[l]:a,[p]:!a},c=r("button",{class:_,"aria-label":i.close,title:i.close,bind:this,onclick:this._close},r("span",{"aria-hidden":"true",class:y})),h=`${t}_title`,g=`${t}_content`,f=o?r("h1",{id:h,class:u},o):null,v=a?r("div",{bind:this,class:m,role:"dialog","aria-labelledby":h,"aria-describedby":g,afterCreate:this._createFocusTrap},c,f,this._renderContent(g)):null;return r("div",{tabIndex:-1,class:this.classes(d,n)},v)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap(),requestAnimationFrame((()=>{this._focusTrap=c(t,{initialFocus:"input",onDeactivate:this._close}),this._toggleFocusTrap()}))}_renderContent(t){const e=this.content;return"string"==typeof e?r("div",{class:h,id:t,innerHTML:e}):a(e)?r("div",{class:h,id:t},e.render()):e instanceof HTMLElement?r("div",{class:h,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){t.appendChild(this)}};t([e({readOnly:!0})],g.prototype,"container",void 0),t([e(),i()],g.prototype,"content",void 0),t([e(),i()],g.prototype,"open",void 0),t([e(),i(),o("esri/t9n/common")],g.prototype,"messages",void 0),t([e({aliasOf:"messages.auth.signIn"}),i()],g.prototype,"title",void 0),g=t([s("esri.identity.IdentityModal")],g);var f=g;export default f;
